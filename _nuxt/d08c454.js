(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{413:function(t,e,r){"use strict";var n=r(0).a.extend({data:function(){return{version:"1.1.0"}}}),o=r(74),l=r(124),c=r.n(l),d=r(484),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-footer",{attrs:{color:t.$colors.indigo.darken1,absolute:"",app:"",height:"24",padless:""}},[r("div",{staticClass:"mx-auto my-auto"},[r("span",{staticClass:"white--text",style:{fontSize:"12px"}},[t._v("\n      sapporo-web "+t._s(t.version)+" Â© Bioinformation and DDBJ Center\n    ")])])])}),[],!1,null,null,null);e.a=component.exports;c()(component,{VFooter:d.a})},424:function(t,e,r){"use strict";r(23),r(15),r(57),r(75),r(35);var n={data:function(){return{type:"",id:""}},computed:{items:function(){var t=[{text:"Home",nuxt:!0,to:"/",icon:"mdi-home-outline"}];if("service"===this.type){var e=this.$store.getters["services/service"](this.id);e&&t.push({text:e.name,nuxt:!0,to:"/services?serviceId=".concat(e.id),icon:"mdi-dns-outline"})}else if("workflow"===this.type){var r=this.$store.getters["workflows/workflow"](this.id);if(r){var n=this.$store.getters["services/service"](r.serviceId);n&&t.push({text:n.name,nuxt:!0,to:"/services?serviceId=".concat(n.id),icon:"mdi-dns-outline"}),t.push({text:r.name,nuxt:!0,to:"/workflows?workflowId=".concat(r.id),icon:"mdi-graph-outline"})}}else if("run"===this.type){var o=this.$store.getters["runs/run"](this.id);if(o){var l=this.$store.getters["workflows/workflow"](o.workflowId);if(l){var c=this.$store.getters["services/service"](o.serviceId);c&&t.push({text:c.name,nuxt:!0,to:"/services?serviceId=".concat(c.id),icon:"mdi-dns-outline"}),t.push({text:l.name,nuxt:!0,to:"/workflows?workflowId=".concat(l.id),icon:"mdi-graph-outline"})}t.push({text:o.name,nuxt:!0,to:"/runs?runId=".concat(o.id),icon:"mdi-chart-box-outline"})}}return t}},created:function(){for(var t=this.$route.query,e=0,r=Object.keys(t);e<r.length;e++){var n=r[e];if(n.includes("Id")){this.type=n.slice(0,-2);var o=t[n]||"";Array.isArray(o)&&(o=o[0]||""),this.id=o;break}}}},o=r(0).a.extend(n),l=r(74),c=r(124),d=r.n(c),v=r(602),m=r(487),f=r(399),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-breadcrumbs",{staticClass:"pt-2",attrs:{items:t.items,large:""},scopedSlots:t._u([{key:"divider",fn:function(){return[r("v-icon",{domProps:{textContent:t._s("mdi-chevron-right")}})]},proxy:!0},{key:"item",fn:function(e){var n=e.item;return[r("v-breadcrumbs-item",{attrs:{nuxt:n.nuxt,to:n.to}},[r("v-icon",{attrs:{color:t.$colors.grey.darken2,left:""},domProps:{textContent:t._s(n.icon)}}),t._v(" "),r("span",{domProps:{textContent:t._s(n.text)}})],1)]}}])})}),[],!1,null,null,null);e.a=component.exports;d()(component,{VBreadcrumbs:v.a,VBreadcrumbsItem:m.a,VIcon:f.a})},426:function(t,e,r){"use strict";r(44);var n={props:{wfType:{type:String,default:""},size:{type:Number,default:26},topMargin:{type:Boolean,default:!0}}},o=r(74),l=r(124),c=r.n(l),d=r(399),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return"CWL"===t.wfType?n("img",{class:{"mt-2":t.topMargin,"mr-2":!0},attrs:{src:r(428),height:t.size}}):"WDL"===t.wfType?n("img",{class:{"mt-2":t.topMargin,"mr-2":!0},attrs:{src:r(429),height:t.size}}):"nextflow"===t.wfType.toLowerCase()||"NFL"===t.wfType?n("img",{class:{"mt-2":t.topMargin,"mr-2":!0},attrs:{src:r(430),height:t.size}}):"snakemake"===t.wfType.toLowerCase()||"SMK"===t.wfType?n("img",{class:{"mt-2":t.topMargin,"mr-2":!0},attrs:{src:r(431),height:t.size}}):n("v-icon",{staticClass:"my-2 mr-2",domProps:{textContent:t._s("mdi-graph-outline")}})}),[],!1,null,null,null);e.a=component.exports;c()(component,{VIcon:d.a})},428:function(t,e,r){t.exports=r.p+"img/cwl-icon.d6a463e.png"},429:function(t,e,r){t.exports=r.p+"img/wdl-icon.3954ce4.png"},430:function(t,e,r){t.exports=r.p+"img/nextflow-icon.5351591.png"},431:function(t,e,r){t.exports=r.p+"img/snakemake-icon.b8289bc.png"},461:function(t,e,r){var content=r(490);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(32).default)("5671913c",content,!0,{sourceMap:!1})},472:function(t,e,r){var content=r(560);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(32).default)("9af5318c",content,!0,{sourceMap:!1})},489:function(t,e,r){"use strict";r(461)},490:function(t,e,r){var n=r(31)(!1);n.push([t.i,'.content-viewer[data-v-08641ad0] .CodeMirror{height:300px!important;font-size:.9rem!important}.content-viewer[data-v-08641ad0] .CodeMirror-lines{font-family:"Fira Code",monospace,sans-serif!important}.info-table[data-v-08641ad0] td:first-child{width:220px;font-weight:500}.info-table[data-v-08641ad0] tr:not(:last-child) td{border-bottom:none!important}',""]),t.exports=n},557:function(t,e,r){r(3)({target:"Number",stat:!0},{isInteger:r(558)})},558:function(t,e,r){var n=r(20),o=Math.floor;t.exports=function(t){return!n(t)&&isFinite(t)&&o(t)===t}},559:function(t,e,r){"use strict";r(472)},560:function(t,e,r){var n=r(31)(!1);n.push([t.i,'.content-viewer[data-v-68159a20] .CodeMirror{height:300px!important;font-size:.9rem!important}.content-viewer[data-v-68159a20] .CodeMirror-lines{font-family:"Fira Code",monospace,sans-serif!important}.info-table[data-v-68159a20] td:first-child{width:220px;font-weight:500}.info-table[data-v-68159a20] tr:not(:last-child) td{border-bottom:none!important}',""]),t.exports=n},597:function(t,e,r){"use strict";r.r(e);var n=r(5),o=(r(57),r(75),r(76),r(58),r(0)),l=r(199),c=r(413),d=r(424),v=(r(19),r(280),r(420),r(421),r(422),r(423)),m=r(127),f=r(426),h={components:{codemirror:v.codemirror,WorkflowIcon:f.a},props:{runId:{type:String,required:!0}},data:function(){return{runInfoHeaders:[{text:"Key",value:"key"},{text:"Value",value:"value"}],tab:2,tooltip:!1,cancelButton:!0}},computed:{service:function(){return this.$store.getters["services/service"](this.run.serviceId)},wesVersion:function(){return this.$store.getters["services/wesVersion"](this.run.serviceId)},workflow:function(){return this.$store.getters["workflows/workflow"](this.run.workflowId)},run:function(){return this.$store.getters["runs/run"](this.runId)},runInfoContents:function(){var t,e,r,n=Object(m.c)(null===(e=null===(t=this.run.runLog)||void 0===t?void 0:t.request)||void 0===e?void 0:e.workflow_url),o="";"1.0.0"!==this.wesVersion&&(o=Object(m.c)(null===(r=this.run.runLog.request)||void 0===r?void 0:r.workflow_engine_name));var l=[{key:"Run ID",value:this.runId},{key:"Workflow URL",value:n}];if("1.0.0"!==this.wesVersion&&o){var c=this.$store.getters["services/workflowEngineVersion"]({serviceId:this.service.id,workflowEngine:o});l.push({key:"Workflow Engine",value:"".concat(o," ").concat(c)})}return l},tabItems:function(){var t,e,r,n,o,l,c,d,v,f=Object(m.c)(null===(e=null===(t=this.run.runLog)||void 0===t?void 0:t.request)||void 0===e?void 0:e.workflow_engine_parameters),h=Object(m.c)(null===(n=null===(r=this.run.runLog)||void 0===r?void 0:r.request)||void 0===n?void 0:n.tags),w=Object(m.c)(null===(l=null===(o=this.run.runLog)||void 0===o?void 0:o.request)||void 0===l?void 0:l.workflow_params),x=[];(null===(c=this.run.runLog)||void 0===c?void 0:c.request)&&"workflow_attachment"in(null===(d=this.run.runLog)||void 0===d?void 0:d.request)&&(x=null===(v=this.run.runLog)||void 0===v?void 0:v.request.workflow_attachment);var _=Object(m.c)(x),k=[{key:"Workflow Engine Parameters",value:f},{key:"Tags",value:h},{key:"Workflow Parameters",value:w}];return"1.0.0"!==this.wesVersion&&(this.tab=3,k.splice(2,0,{key:"Workflow Attachment",value:_})),k}},methods:{reloadRunState:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("runs/updateRun",t.runId);case 2:case"end":return e.stop()}}),e)})))()},codeMirrorMode:function(content){return Object(m.a)(content)},validUrl:function(t){return Object(m.g)(t)},cancelRun:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!["QUEUED","INITIALIZING","RUNNING","PAUSED"].includes(t.run.state)){e.next=7;break}return t.cancelButton=!1,e.next=4,t.$store.dispatch("runs/cancelRun",t.runId);case 4:return e.next=6,t.$store.dispatch("runs/updateRun",t.runId);case 6:t.cancelButton=!0;case 7:case"end":return e.stop()}}),e)})))()},copyTooltip:function(){var t=this;this.$copyText(this.runId),this.tooltip=!0,setTimeout((function(){t.tooltip=!1}),1500)}}},w=o.a.extend(h),x=(r(489),r(74)),_=r(124),k=r.n(_),y=r(400),I=r(407),C=r(462),L=r(598),O=r(399),V=r(405),R=r(591),$=r(603),j=r(600),N=r(592),component=Object(x.a)(w,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",{attrs:{"max-width":"1200"}},[r("div",{staticClass:"d-flex align-center mx-6 pt-4"},[r("workflow-icon",{attrs:{size:36,"top-margin":!1,"wf-type":t.workflow.type}}),t._v(" "),r("div",{staticClass:"card-header",domProps:{textContent:t._s(t.run.name)}}),t._v(" "),r("v-spacer"),t._v(" "),r("v-chip",{staticClass:"mr-4",attrs:{color:t.$store.getters["runs/stateColor"](t.run.id),"text-color":"white"},domProps:{textContent:t._s(t.run.state)}}),t._v(" "),["QUEUED","INITIALIZING","RUNNING","PAUSED"].includes(t.run.state)?r("v-btn",{staticClass:"mr-4",attrs:{outlined:"",color:"error",disabled:!t.cancelButton},on:{click:function(e){return e.stopPropagation(),t.cancelRun.apply(null,arguments)}}},[r("v-icon",{attrs:{left:""},domProps:{textContent:t._s("mdi-close")}}),t._v(" "),r("span",{domProps:{textContent:t._s("Cancel Run")}})],1):t._e(),t._v(" "),r("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[r("v-btn",t._g({attrs:{color:t.$colors.grey.darken2,outlined:"",small:""},on:{click:function(e){return e.stopPropagation(),t.reloadRunState.apply(null,arguments)}}},n),[r("v-icon",{domProps:{textContent:t._s("mdi-reload")}})],1)]}}])},[t._v(" "),r("span",{domProps:{textContent:t._s("Reload run status")}})])],1),t._v(" "),r("v-data-table",{staticClass:"mx-12 mt-2 info-table",attrs:{headers:t.runInfoHeaders,items:t.runInfoContents,"calculate-widths":"","disable-filtering":"","disable-pagination":"","disable-sort":"","hide-default-footer":"","hide-default-header":"","item-key":"key"},scopedSlots:t._u([{key:"item.value",fn:function(e){var n=e.item;return["Run ID"===n.key?r("div",{staticClass:"d-flex align-center"},[r("span",{domProps:{textContent:t._s(n.value)}}),t._v(" "),r("v-tooltip",{attrs:{top:"",value:t.tooltip},scopedSlots:t._u([{key:"activator",fn:function(e){return[r("v-icon",t._g({attrs:{right:""},domProps:{textContent:t._s("mdi-clipboard-outline")},on:{click:function(e){return e.stopPropagation(),t.copyTooltip.apply(null,arguments)}}},e))]}}],null,!0)},[t._v(" "),r("span",{domProps:{textContent:t._s("Copied!!")}})])],1):"Workflow URL"===n.key&&t.validUrl(n.value)?r("a",{attrs:{href:n.value},domProps:{textContent:t._s(n.value)}}):r("span",{domProps:{textContent:t._s(n.value)}})]}}],null,!0)}),t._v(" "),r("div",{staticClass:"ml-12 mr-11"},[r("v-tabs",{attrs:{vertical:"",height:"332"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[t._l(t.tabItems,(function(e){return r("v-tab",{key:e.key,style:{textTransform:"none",justifyContent:"start",letterSpacing:"normal",maxWidth:"210px",minWidth:"210px"},domProps:{textContent:t._s(e.key)}})})),t._v(" "),t._l(t.tabItems,(function(e){return r("v-tab-item",{key:e.key},[r("codemirror",{staticClass:"ml-6 mr-1 mt-2 mb-6 elevation-2 content-viewer",style:{outline:"solid 1px "+t.$colors.grey.lighten1},attrs:{options:{lineNumbers:!0,mode:t.codeMirrorMode(e.value),readOnly:"nocursor",tabSize:2},value:e.value}})],1)}))],2)],1)],1)}),[],!1,null,"08641ad0",null),P=component.exports;k()(component,{VBtn:y.a,VCard:I.a,VChip:C.a,VDataTable:L.a,VIcon:O.a,VSpacer:V.a,VTab:R.a,VTabItem:$.a,VTabs:j.a,VTooltip:N.a});r(557),r(44),r(35),r(24),r(60),r(11),r(33),r(36),r(156),r(23);var T={components:{codemirror:v.codemirror},props:{runId:{type:String,required:!0}},data:function(){return{logInfoHeaders:[{text:"Key",value:"key"},{text:"Value",value:"value"}],tab:null}},computed:{service:function(){return this.$store.getters["services/service"](this.run.serviceId)},wesVersion:function(){return this.$store.getters["services/wesVersion"](this.run.serviceId)},isSapporo:function(){return"sapporo-1.0.0"===this.wesVersion||"sapporo-1.0.1"===this.wesVersion},run:function(){return this.$store.getters["runs/run"](this.runId)},logInfoContents:function(){var t,e,r,n=null===(t=this.run.runLog.run_log)||void 0===t?void 0:t.start_time;!n&&this.run.runLog.run_log&&"task_started"in this.run.runLog.run_log&&(n=this.run.runLog.run_log.task_started);var o=null===(e=this.run.runLog.run_log)||void 0===e?void 0:e.end_time;!o&&this.run.runLog.run_log&&"task_finished"in this.run.runLog.run_log&&(o=this.run.runLog.run_log.task_finished);var l=Object(m.d)(this.$dayjs,Object(m.c)(n)),c=Object(m.d)(this.$dayjs,Object(m.c)(o)),d=Object(m.c)(null===(r=this.run.runLog.run_log)||void 0===r?void 0:r.exit_code),v=[{key:"Start Time",value:l},{key:"End Time",value:c}];return Number.isInteger(d)&&v.push({key:"Exit Code",value:d}),v},tabItems:function(){var t,e,r,n=null===(t=this.run.runLog.run_log)||void 0===t?void 0:t.cmd;return!n&&this.run.runLog.run_log&&"command"in this.run.runLog.run_log&&(n=this.run.runLog.run_log.command),[{key:"Command",value:Object(m.c)(n)},{key:"Stdout",value:Object(m.c)(null===(e=this.run.runLog.run_log)||void 0===e?void 0:e.stdout)},{key:"Stderr",value:Object(m.c)(null===(r=this.run.runLog.run_log)||void 0===r?void 0:r.stderr)},{key:"Task Logs",value:Object(m.c)(this.run.runLog.task_logs)},{key:"Outputs",value:Object(m.c)(this.run.runLog.outputs)}]}},methods:{codeMirrorMode:function(content){return Object(m.a)(content)},downloadOutputFile:function(t){var link=document.createElement("a");link.download=t.file_name.split("/").slice(-1)[0],link.href=t.file_url,link.click(),link.remove()},downloadRunLog:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,link;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("runs/updateRun",t.run.id);case 2:r=new Blob([JSON.stringify(t.run.runLog,null,2)],{type:"application/json"}),n=window.URL.createObjectURL(r),(link=document.createElement("a")).download="".concat(t.run.name,".json"),link.href=n,link.click(),link.remove(),window.URL.revokeObjectURL(n);case 10:case"end":return e.stop()}}),e)})))()}}},S=o.a.extend(T),M=(r(559),r(469)),E=r(443),U=r(425),A=r(470),W=r(446),B=Object(x.a)(S,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",{attrs:{"max-width":"1200"}},[r("div",{staticClass:"d-flex align-center mx-6 pt-4"},[r("v-icon",{attrs:{color:"black",left:""},domProps:{textContent:t._s("mdi-file-chart-outline")}}),t._v(" "),r("div",{staticClass:"card-header",domProps:{textContent:t._s("Run Log")}}),t._v(" "),r("v-spacer"),t._v(" "),r("v-btn",{staticClass:"mr-6",attrs:{color:t.$colors.grey.darken2,outlined:""},on:{click:function(e){return e.stopPropagation(),t.downloadRunLog.apply(null,arguments)}}},[r("v-icon",{attrs:{left:""},domProps:{textContent:t._s("mdi-download")}}),t._v(" "),r("span",{domProps:{textContent:t._s("Download Run Log")}})],1)],1),t._v(" "),r("v-data-table",{staticClass:"mx-12 mt-2 info-table",attrs:{headers:t.logInfoHeaders,items:t.logInfoContents,"calculate-widths":"","disable-filtering":"","disable-pagination":"","disable-sort":"","hide-default-footer":"","hide-default-header":"","item-key":"key"}}),t._v(" "),r("div",{staticClass:"ml-12 mr-11"},[r("v-tabs",{attrs:{vertical:"",height:"332"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[t._l(t.tabItems,(function(e){return r("v-tab",{key:e.key,style:{textTransform:"none",justifyContent:"start",letterSpacing:"normal",maxWidth:"210px",minWidth:"210px"},domProps:{textContent:t._s(e.key)}})})),t._v(" "),t._l(t.tabItems,(function(e){return r("v-tab-item",{key:e.key},[t.isSapporo&&"Outputs"===e.key&&""!==e.value&&null!==JSON.parse(e.value)&&0!==JSON.parse(e.value).length?r("v-list",{staticClass:"ml-6 mt-2 mb-6 mr-1",style:{outline:"solid 1px "+t.$colors.grey.lighten1,overflowY:"auto"},attrs:{dense:"",elevation:"2",flat:"","max-height":"300",rounded:""}},[r("v-list-item-group",{attrs:{color:"primary",disable:""}},t._l(JSON.parse(e.value),(function(e,n){return r("v-list-item",{key:n,on:{click:function(r){return t.downloadOutputFile(e)}}},[r("v-list-item-icon",[r("v-icon",{domProps:{textContent:t._s("mdi-download")}})],1),t._v(" "),r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:t._s(e.file_name)}})],1)],1)})),1)],1):r("codemirror",{staticClass:"ml-6 mr-1 mt-2 mb-6 elevation-2 content-viewer",style:{outline:"solid 1px "+t.$colors.grey.lighten1},attrs:{options:{lineNumbers:!0,mode:t.codeMirrorMode(e.value),readOnly:"nocursor",lineWrapping:"Command"===e.key,tabSize:2},value:e.value}})],1)}))],2)],1)],1)}),[],!1,null,"68159a20",null),D=B.exports;k()(B,{VBtn:y.a,VCard:I.a,VDataTable:L.a,VIcon:O.a,VList:M.a,VListItem:E.a,VListItemContent:U.a,VListItemGroup:A.a,VListItemIcon:W.a,VListItemTitle:U.b,VSpacer:V.a,VTab:R.a,VTabItem:$.a,VTabs:j.a});var z={components:{AppBar:l.a,AppFooter:c.a,Breadcrumbs:d.a,InfoCard:P,LogCard:D},middleware:function(t){var e=t.store,r=t.route.query.runId||"";Array.isArray(r)&&(r=r[0]||""),window.onNuxtReady(Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch("runs/updateRun",r);case 2:case"end":return t.stop()}}),t)}))))},computed:{runId:function(){var t=this.$route.query.runId||"";return Array.isArray(t)?t[0]||"":t},existRunId:function(){return this.$store.getters["runs/runIds"].includes(this.runId)},run:function(){return this.$store.getters["runs/run"](this.runId)}},created:function(){var t=this;setInterval(Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("visible"!==document.visibilityState){e.next=4;break}if(!["UNKNOWN","QUEUED","INITIALIZING","RUNNING","CANCELING"].includes(t.$store.getters["runs/run"](t.runId))){e.next=4;break}return e.next=4,t.$store.dispatch("runs/updateRun",t.runId);case 4:case"end":return e.stop()}}),e)}))),5e3)}},F=o.a.extend(z),G=r(406),J=r(410),H=r(408),K=Object(x.a)(F,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",[r("app-bar"),t._v(" "),r("v-main",{staticClass:"background"},[r("v-container",{attrs:{fluid:""}},[r("breadcrumbs"),t._v(" "),t.existRunId?[r("info-card",{staticClass:"mx-auto",attrs:{"run-id":t.runId}}),t._v(" "),r("log-card",{staticClass:"mt-8 mx-auto mb-4",attrs:{"run-id":t.runId}})]:[t._v(t._s("Run id: "+t.runId+" does not exist."))]],2)],1),t._v(" "),r("app-footer")],1)}),[],!1,null,null,null);e.default=K.exports;k()(K,{VApp:G.a,VContainer:J.a,VMain:H.a})}}]);