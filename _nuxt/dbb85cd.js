(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{369:function(t,e,n){"use strict";var r=n(0).a.extend({data:function(){return{version:"1.0.5"}}}),o=n(53),l=n(78),c=n.n(l),d=n(427),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-footer",{attrs:{color:t.$colors.indigo.darken2,absolute:"",app:"",elevation:"8",height:"32",padless:""}},[n("div",{staticClass:"mx-auto my-auto"},[n("span",{staticClass:"white--text",style:{fontSize:"12px"}},[t._v("\n      Sapporo-web "+t._s(t.version)+" Â© Bioinformation and DDBJ Center\n    ")])])])}),[],!1,null,null,null);e.a=component.exports;c()(component,{VFooter:d.a})},406:function(t,e,n){var content=n(430);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(21).default)("a5b497a6",content,!0,{sourceMap:!1})},415:function(t,e,n){var content=n(485);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(21).default)("7d15f0d2",content,!0,{sourceMap:!1})},429:function(t,e,n){"use strict";n(406)},430:function(t,e,n){var r=n(20)(!1);r.push([t.i,'.content-viewer[data-v-0a0bd475] .CodeMirror{height:300px!important;font-size:.9rem!important}.content-viewer[data-v-0a0bd475] .CodeMirror-lines{font-family:"Fira Code",monospace,sans-serif!important}.info-table[data-v-0a0bd475] td:first-child{width:220px;font-weight:500}',""]),t.exports=r},482:function(t,e,n){var r=n(11);r(r.S,"Number",{isInteger:n(483)})},483:function(t,e,n){var r=n(29),o=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&o(t)===t}},484:function(t,e,n){"use strict";n(415)},485:function(t,e,n){var r=n(20)(!1);r.push([t.i,'.content-viewer[data-v-824aec04] .CodeMirror{height:300px!important;font-size:.9rem!important}.content-viewer[data-v-824aec04] .CodeMirror-lines{font-family:"Fira Code",monospace,sans-serif!important}.info-table[data-v-824aec04] td:first-child{width:220px;font-weight:500}',""]),t.exports=r},510:function(t,e,n){"use strict";n.r(e);n(48),n(52),n(49);var r=n(4),o=n(163),l=n(369),c=n(165),d=(n(374),n(375),n(376),n(377)),m=n(57),v=n(0),f={components:{codemirror:d.codemirror},props:{runId:{type:String,required:!0}},data:function(){return{runInfoHeaders:[{text:"Key",value:"key"},{text:"Value",value:"value"}],tab:3,runIdTooltip:!1,cancelButton:!0}},computed:{service:function(){return this.$store.getters["services/service"](this.run.serviceId)},workflow:function(){return this.$store.getters["workflows/workflow"](this.run.workflowId)},run:function(){return this.$store.getters["runs/run"](this.runId)},runInfoContents:function(){return[{key:"Run ID",value:this.runId},{key:"Service",value:""},{key:"Workflow",value:""},{key:"Workflow URL",value:this.run.runLog.request.workflow_url},{key:"Workflow Type Version",value:"".concat(this.run.runLog.request.workflow_type," ").concat(this.run.runLog.request.workflow_type_version)},{key:"Workflow Engine",value:"".concat(this.run.runLog.request.workflow_engine_name," ").concat(this.$store.getters["services/workflowEngineVersion"]({serviceId:this.service.id,workflowEngine:this.run.runLog.request.workflow_engine_name}))}]},tabItems:function(){return[{key:"Workflow Engine Parameters",value:this.run.runLog.request.workflow_engine_parameters},{key:"Tags",value:this.run.runLog.request.tags},{key:"Workflow Attachment",value:JSON.stringify(this.run.runLog.request.workflow_attachment,null,2)},{key:"Workflow Prameters",value:this.run.runLog.request.workflow_params}]}},methods:{reloadRunState:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("runs/updateRun",t.runId);case 2:case"end":return e.stop()}}),e)})))()},codeMirrorMode:function(content){return Object(m.a)(content)},validUrl:function(t){return Object(m.f)(t)},cancelRun:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!["QUEUED","INITIALIZING","RUNNING","PAUSED"].includes(t.run.state)){e.next=7;break}return t.cancelButton=!1,e.next=4,t.$store.dispatch("runs/cancelRun",t.runId);case 4:return e.next=6,t.$store.dispatch("runs/updateRun",t.runId);case 6:t.cancelButton=!0;case 7:case"end":return e.stop()}}),e)})))()},copyRunId:function(){var t=this;this.$copyText(this.runId),this.runIdTooltip=!0,setTimeout((function(){t.runIdTooltip=!1}),1500)}}},h=v.a.extend(f),w=(n(429),n(53)),_=n(78),k=n.n(_),x=n(356),y=n(364),I=n(407),C=n(511),R=n(355),L=n(362),V=n(505),N=n(514),S=n(512),O=n(506),component=Object(w.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{attrs:{elevation:"8","max-width":"1200"}},[n("div",{staticClass:"d-flex align-center px-6 pt-4"},[n("div",{staticClass:"card-header",domProps:{textContent:t._s(t.run.name)}}),t._v(" "),n("v-spacer"),t._v(" "),n("v-chip",{staticClass:"mr-4",attrs:{color:t.$store.getters["runs/stateColor"](t.run.id),"text-color":"white"},domProps:{textContent:t._s(t.run.state)}}),t._v(" "),["QUEUED","INITIALIZING","RUNNING","PAUSED"].includes(t.run.state)?n("v-btn",{staticClass:"mr-4",attrs:{outlined:"",color:"error",disabled:!t.cancelButton},on:{click:function(e){return e.stopPropagation(),t.cancelRun(e)}}},[n("v-icon",{staticClass:"mr-2",domProps:{textContent:t._s("mdi-close")}}),t._v(" "),n("span",{domProps:{textContent:t._s("Cancel Run")}})],1):t._e(),t._v(" "),n("v-btn",{attrs:{color:t.$colors.grey.darken2,outlined:"",small:""},on:{click:function(e){return e.stopPropagation(),t.reloadRunState(e)}}},[n("v-icon",{domProps:{textContent:t._s("mdi-reload")}})],1)],1),t._v(" "),n("v-data-table",{staticClass:"mx-12 pt-2 info-table",attrs:{headers:t.runInfoHeaders,items:t.runInfoContents,"calculate-widths":"","disable-filtering":"","disable-pagination":"","disable-sort":"","hide-default-footer":"","hide-default-header":"","item-key":"key"},scopedSlots:t._u([{key:"item.value",fn:function(e){var r=e.item;return["Run ID"===r.key?n("div",{staticClass:"align-center"},[n("span",[t._v(t._s(r.value))]),t._v(" "),n("v-tooltip",{attrs:{top:"",value:t.runIdTooltip,color:"primary"},scopedSlots:t._u([{key:"activator",fn:function(e){return[n("v-icon",{staticClass:"ml-2",domProps:{textContent:t._s("mdi-clipboard-outline")},on:{click:function(e){return e.stopPropagation(),t.copyRunId(e)}}})]}}],null,!0)},[t._v(" "),n("span",[t._v("Coppied!")])])],1):"Service"===r.key?n("nuxt-link",{attrs:{to:{path:"/services",query:{serviceId:t.service.id}}},domProps:{textContent:t._s(t.service.name)}}):"Workflow"===r.key?n("nuxt-link",{attrs:{to:{path:"/workflows",query:{workflowId:t.workflow.id}}},domProps:{textContent:t._s(t.workflow.name)}}):"Workflow URL"===r.key&&t.validUrl(r.value)?n("a",{attrs:{href:r.value}},[t._v(t._s(r.value))]):n("div",{domProps:{textContent:t._s(r.value)}})]}}],null,!0)}),t._v(" "),n("div",{staticClass:"mx-12"},[n("v-tabs",{attrs:{vertical:"",height:"332"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[t._l(t.tabItems,(function(e){return n("v-tab",{key:e.key,style:{textTransform:"none",justifyContent:"start",letterSpacing:"normal",maxWidth:"210px",minWidth:"210px"},domProps:{textContent:t._s(e.key)}})})),t._v(" "),t._l(t.tabItems,(function(e){return n("v-tab-item",{key:e.key},[n("codemirror",{staticClass:"ml-6 mr-1 mt-2 mb-6 elevation-2 content-viewer",style:{outline:"solid 1px "+t.$colors.grey.lighten1},attrs:{options:{lineNumbers:!0,mode:t.codeMirrorMode(e.value),readOnly:!0,tabSize:2},value:e.value}})],1)}))],2)],1)],1)}),[],!1,null,"0a0bd475",null),$=component.exports;k()(component,{VBtn:x.a,VCard:y.a,VChip:I.a,VDataTable:C.a,VIcon:R.a,VSpacer:L.a,VTab:V.a,VTabItem:N.a,VTabs:S.a,VTooltip:O.a});n(17),n(46),n(27),n(33),n(482);var T={components:{codemirror:d.codemirror},props:{runId:{type:String,required:!0}},data:function(){return{logInfoHeaders:[{text:"Key",value:"key"},{text:"Value",value:"value"}],tab:null}},computed:{run:function(){return this.$store.getters["runs/run"](this.runId)},logInfoContents:function(){return[{key:"Start Time",value:this.run.runLog.run_log.start_time?this.$dayjs.utc(this.run.runLog.run_log.start_time).local().format("YYYY-MM-DD HH:mm:ss"):""},{key:"End Time",value:this.run.runLog.run_log.end_time?this.$dayjs.utc(this.run.runLog.run_log.end_time).local().format("YYYY-MM-DD HH:mm:ss"):""},{key:"Exit Code",value:"".concat(Number.isInteger(this.run.runLog.run_log.exit_code)?this.run.runLog.run_log.exit_code:"")}]},tabItems:function(){return[{key:"Command",value:this.run.runLog.run_log.cmd},{key:"Stdout",value:this.run.runLog.run_log.stdout},{key:"Stderr",value:this.run.runLog.run_log.stderr},{key:"Outputs",value:JSON.stringify(this.run.runLog.outputs,null,2)}]}},methods:{codeMirrorMode:function(content){return Object(m.a)(content)},downloadOutputFile:function(t){var link=document.createElement("a");link.download=t.file_name.split("/").slice(-1)[0],link.href=t.file_url,link.click(),link.remove()},downloadRunLog:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,link;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("runs/updateRun",t.run.id);case 2:n=new Blob([JSON.stringify(t.run.runLog,null,2)],{type:"application/json"}),r=window.URL.createObjectURL(n),(link=document.createElement("a")).download="".concat(t.run.name,".json"),link.href=r,link.click(),link.remove(),window.URL.revokeObjectURL(r);case 10:case"end":return e.stop()}}),e)})))()}}},P=v.a.extend(T),M=(n(484),n(412)),E=n(391),j=n(378),U=n(413),D=n(394),W=Object(w.a)(P,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{attrs:{elevation:"8","max-width":"1200"}},[n("div",{staticClass:"d-flex align-center px-6 pt-4"},[n("div",{staticClass:"card-header",domProps:{textContent:t._s("Run Log")}}),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{staticClass:"mr-4",attrs:{color:t.$colors.grey.darken2,outlined:""},on:{click:function(e){return e.stopPropagation(),t.downloadRunLog(e)}}},[n("v-icon",{staticClass:"mr-2",domProps:{textContent:t._s("mdi-download")}}),t._v(" "),n("span",{domProps:{textContent:t._s("Download Run Log")}})],1)],1),t._v(" "),n("v-data-table",{staticClass:"mx-12 pt-2 info-table",attrs:{headers:t.logInfoHeaders,items:t.logInfoContents,"calculate-widths":"","disable-filtering":"","disable-pagination":"","disable-sort":"","hide-default-footer":"","hide-default-header":"","item-key":"key"}}),t._v(" "),n("div",{staticClass:"mx-12"},[n("v-tabs",{attrs:{vertical:"",height:"332"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[t._l(t.tabItems,(function(e){return n("v-tab",{key:e.key,style:{textTransform:"none",justifyContent:"start",letterSpacing:"normal",maxWidth:"210px",minWidth:"210px"},domProps:{textContent:t._s(e.key)}})})),t._v(" "),t._l(t.tabItems,(function(e){return n("v-tab-item",{key:e.key},["Outputs"===e.key&&null!==JSON.parse(e.value)&&0!==JSON.parse(e.value).length?n("v-list",{staticClass:"ml-6 mt-2 mb-6 mr-1",style:{outline:"solid 1px "+t.$colors.grey.lighten1,overflowY:"auto"},attrs:{dense:"",elevation:"2",flat:"","max-height":"300",rounded:""}},[n("v-list-item-group",{attrs:{color:"primary",disable:""}},t._l(JSON.parse(e.value),(function(e,r){return n("v-list-item",{key:r,on:{click:function(n){return t.downloadOutputFile(e)}}},[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:t._s("mdi-download")}})],1),t._v(" "),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s(e.file_name)}})],1)],1)})),1)],1):n("codemirror",{staticClass:"ml-6 mr-1 mt-2 mb-6 elevation-2 content-viewer",style:{outline:"solid 1px "+t.$colors.grey.lighten1},attrs:{options:{lineNumbers:!0,mode:t.codeMirrorMode(e.value),readOnly:!0,lineWrapping:"Command"===e.key,tabSize:2},value:e.value}})],1)}))],2)],1)],1)}),[],!1,null,"824aec04",null),A=W.exports;k()(W,{VBtn:x.a,VCard:y.a,VDataTable:C.a,VIcon:R.a,VList:M.a,VListItem:E.a,VListItemContent:j.a,VListItemGroup:U.a,VListItemIcon:D.a,VListItemTitle:j.b,VSpacer:L.a,VTab:V.a,VTabItem:N.a,VTabs:S.a});var B={components:{AppBar:o.a,AppFooter:l.a,Breadcrumbs:c.a,InfoCard:$,LogCard:A},middleware:function(t){var e=t.store,n=t.route.query.runId||"";Array.isArray(n)&&(n=n[0]||""),window.onNuxtReady(Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch("runs/updateRun",n);case 2:case"end":return t.stop()}}),t)}))))},computed:{runId:function(){var t=this.$route.query.runId||"";return Array.isArray(t)?t[0]||"":t},existRunId:function(){return this.$store.getters["runs/runIds"].includes(this.runId)},run:function(){return this.$store.getters["runs/run"](this.runId)}},created:function(){var t=this;setInterval(Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("visible"!==document.visibilityState){e.next=4;break}if(!["UNKNOWN","QUEUED","INITIALIZING","RUNNING","CANCELING"].includes(t.run.state)){e.next=4;break}return e.next=4,t.$store.dispatch("runs/updateRun",t.runId);case 4:case"end":return e.stop()}}),e)}))),5e3)}},J=v.a.extend(B),Y=n(363),G=n(368),H=n(365),F=Object(w.a)(J,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("app-bar"),t._v(" "),n("v-main",{staticClass:"background"},[n("v-container",{attrs:{fluid:""}},[n("breadcrumbs"),t._v(" "),t.existRunId?[n("info-card",{staticClass:"mx-auto",attrs:{"run-id":t.runId}}),t._v(" "),n("log-card",{staticClass:"mt-8 mx-auto mb-4",attrs:{"run-id":t.runId}})]:[t._v(t._s("Run id: "+t.runId+" does not exist."))]],2)],1),t._v(" "),n("app-footer")],1)}),[],!1,null,null,null);e.default=F.exports;k()(F,{VApp:Y.a,VContainer:G.a,VMain:H.a})}}]);