(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{188:function(e,r,t){"use strict";var n=t(31);r.a=function(e,r){r("colors",n.a)}},189:function(e,r,t){"use strict";var n=t(271),o=t.n(n),c=t(272),f=new o.a({isCompression:!1});r.a=function(e){window.onNuxtReady((function(){Object(c.a)({storage:{getItem:function(e){return f.get(e)},setItem:function(e,r){return f.set(e,r)},removeItem:function(e){return f.remove(e)}}})(e.store)}))}},190:function(e,r,t){"use strict";var n=t(18),o=t.n(n),c=t(273),f=t.n(c),l=t(84),d=t.n(l);o.a.extend(d.a),o.a.extend(f.a),o.a.tz.setDefault(o.a.tz.guess()),r.a=function(e,r){r("dayjs",o.a)}},191:function(e,r,t){"use strict";var n=t(0),o=t(274),c=t.n(o);n.a.use(c.a)},192:function(e,r,t){"use strict";t(39),t(15),t(52),t(40),t(9),t(46),t(57),t(44);var n=t(5),o=(t(58),t(51),t(28),t(62),t(76),t(275));function c(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return f(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return f(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==t.return||t.return()}finally{if(l)throw o}}}}function f(e,r){(null==r||r>e.length)&&(r=e.length);for(var i=0,t=new Array(r);i<r;i++)t[i]=e[i];return t}r.a=function(e){window.onNuxtReady(Object(n.a)(regeneratorRuntime.mark((function r(){var t,n,f,l,d,w;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("true"!==(null===(t=e.env)||void 0===t?void 0:t.LOAD_PRE_REGISTERED_SERVICES)){r.next=21;break}n=e.store.getters["services/services"],f=n.map((function(e){return e.name})),l=c(o),r.prev=4,l.s();case 6:if((d=l.n()).done){r.next=13;break}if(w=d.value,f.includes(w.name)){r.next=11;break}return r.next=11,e.store.dispatch("services/submitService",{name:w.name,endpoint:w.endpoint,preRegistered:!0});case 11:r.next=6;break;case 13:r.next=18;break;case 15:r.prev=15,r.t0=r.catch(4),l.e(r.t0);case 18:return r.prev=18,l.f(),r.finish(18);case 21:case"end":return r.stop()}}),r,null,[[4,15,18,21]])}))))}},197:function(e,r,t){"use strict";var n=t(0).a.extend({}),o=t(75),c=t(124),f=t.n(c),l=t(408),d=t(399),w=t(398),v=t(404),k=t(269),component=Object(o.a)(n,(function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("v-app-bar",{attrs:{color:e.$colors.indigo.darken1,app:"",absolute:"",dense:""}},[n("v-toolbar-title",[n("nuxt-link",{staticClass:"white--text text-decoration-none",attrs:{to:"/"}},[n("img",{staticClass:"mt-2",attrs:{src:t(313),alt:"logo",height:"48"}})])],1),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{staticClass:"text-capitalize",attrs:{color:"white",href:"https://hackmd.io/@suecharo/sapporo-web-docs",outlined:""}},[n("v-icon",{attrs:{left:"",color:"white"},domProps:{textContent:e._s("mdi-book-open-outline")}}),e._v("\n    Docs\n  ")],1)],1)}),[],!1,null,null,null);r.a=component.exports;f()(component,{VAppBar:l.a,VBtn:d.a,VIcon:w.a,VSpacer:v.a,VToolbarTitle:k.a})},275:function(e){e.exports=JSON.parse('[{"name":"Pre-registered Service","endpoint":"http://localhost:1122"}]')},287:function(e,r,t){e.exports=t(288)},313:function(e,r,t){e.exports=t.p+"img/logo.c93d28a.svg"},361:function(e,r,t){var content=t(362);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,t(33).default)("f19ab706",content,!0,{sourceMap:!1})},362:function(e,r,t){var n=t(32)(!1);n.push([e.i,'.background{background:#e7ebf4}.text-decoration-none{text-decoration:none}.card-header{font-family:"Quicksand",sans-serif;font-size:1.75rem;font-weight:600}font{color:#424242}',""]),e.exports=n},363:function(e,r,t){"use strict";t.r(r)},364:function(e,r,t){"use strict";t.r(r),t.d(r,"state",(function(){return R})),t.d(r,"getters",(function(){return j})),t.d(r,"mutations",(function(){return _})),t.d(r,"actions",(function(){return O}));t(15),t(52),t(40),t(9),t(46),t(57),t(44);var n=t(64),o=t(5),c=t(7),f=t(16),l=(t(58),t(106),t(13),t(51),t(14),t(28),t(176),t(39),t(29),t(56),t(20),t(62),t(76),t(18)),d=t.n(l),w=t(84),v=t.n(w),k=t(0),m=t(31),h=t(70),I=t(60);function y(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return x(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return x(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,f=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return c=e.done,e},e:function(e){f=!0,o=e},f:function(){try{c||null==t.return||t.return()}finally{if(f)throw o}}}}function x(e,r){(null==r||r>e.length)&&(r=e.length);for(var i=0,t=new Array(r);i<r;i++)t[i]=e[i];return t}d.a.extend(v.a);var R=function(){return{}},j={run:function(e){return function(r){return e[r]}},runs:function(e){return Object.values(e)},runsByIds:function(e,r){return function(e){return e.map((function(e){return r.run(e)})).filter((function(e){return e}))}},runIds:function(e){return Object.keys(e)},tableItems:function(e,r,t,n){return function(e){var t,o=[],c=y(r.runsByIds(e));try{for(c.s();!(t=c.n()).done;){var f=t.value,l=n["services/service"](f.serviceId),w=n["workflows/workflow"](f.workflowId);o.push({runId:f.id,runName:f.name,serviceId:f.serviceId,serviceName:l?l.name:"",workflowId:f.workflowId,workflowName:w?w.name:"",workflowType:w?w.type:"",workflowVersion:w?w.version:"",addedDate:d()(f.addedDate).local().format("YYYY-MM-DD HH:mm:ss"),state:f.state,stateColor:r.stateColor(f.id)})}}catch(e){c.e(e)}finally{c.f()}return o}},stateColor:function(e,r){return function(e){var t=r.run(e);if(t){var n=t.state;if("UNKNOWN"===n)return m.a.grey.darken1;if("QUEUED"===n)return m.a.lightBlue.darken1;if("INITIALIZING"===n)return m.a.lightBlue.darken1;if("RUNNING"===n)return m.a.indigo.darken1;if("PAUSED"===n)return m.a.lightBlue.darken1;if("COMPLETE"===n)return m.a.green.darken1;if("EXECUTOR_ERROR"===n)return m.a.red.darken1;if("SYSTEM_ERROR"===n)return m.a.red.darken1;if("CANCELED"===n)return m.a.amber.darken1;if("CANCELING"===n)return m.a.amber.darken1}return m.a.grey.darken1}}},_={clearRuns:function(e){for(var r=0,t=Object.keys(e);r<t.length;r++){var n=t[r];n in e&&k.a.delete(e,n)}},deleteRun:function(e,r){r in e&&k.a.delete(e,r)},addRun:function(e,r){k.a.set(e,r.id,r)},setProp:function(e,r){if(r.runId in e&&(k.a.set(e[r.runId],r.key,r.value),"object"===Object(f.a)(r.value)&&"run_id"in r.value))for(var t=r.value,n=0,o=Object.entries(t);n<o.length;n++){var l=Object(c.a)(o[n],2),d=l[0],w=l[1];if(null===w||"object"!==Object(f.a)(w))k.a.set(e[r.runId].runLog,d,w);else for(var v=0,m=Object.entries(w);v<m.length;v++){var h=Object(c.a)(m[v],2),I=h[0],y=h[1];k.a.set(e[r.runId].runLog[d],I,y)}}}},O={clearRuns:function(e){(0,e.commit)("clearRuns")},executeRun:function(e,r){return Object(o.a)(regeneratorRuntime.mark((function t(){var o,c,f,data,l,w,i,v,k,m,y,x,R;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.dispatch,c=e.commit,f=e.rootGetters,data=new FormData,r.workflow.preRegistered?(data.append("workflow_name",r.workflow.name),data.append("tags",r.tags)):(data.append("workflow_url",r.workflow.url),data.append("workflow_type",r.workflow.type),data.append("workflow_type_version",r.workflow.version),"workflow_name"in(l=JSON.parse(r.tags))||(l.workflow_name=r.workflow.name),data.append("tags",JSON.stringify(l))),data.append("workflow_engine_name",r.wfEngineName),data.append("workflow_engine_parameters",r.wfEngineParams),data.append("workflow_params",r.wfParams),data.append("workflow_attachment",r.wfAttachmentText),!Object(h.e)(r.workflow.url)&&f["services/workflowAttachment"](r.service.id)&&(w=r.workflow.url.split("/").slice(-1)[0],[].concat(Object(n.a)(JSON.parse(r.wfAttachmentText).map((function(e){return e.file_name})).map((function(e){return e.split("/").slice(-1)[0]}))),Object(n.a)(r.fileNames.filter((function(e){return e})).map((function(e){return e.split("/").slice(-1)[0]})))).includes(w)||data.append("workflow_attachment[]",new Blob([r.workflow.content]),r.workflow.url)),f["services/workflowAttachment"](r.service.id))for(i=0;i<r.workflowAttachment.length;i++)(v=r.workflowAttachment[i])&&((k=r.fileNames[i])?data.append("workflow_attachment[]",v,k):data.append("workflow_attachment[]",v));return t.next=11,Object(I.e)(r.service.endpoint,data);case 11:return m=t.sent.run_id,t.next=14,Object(I.c)(r.service.endpoint,m);case 14:return y=t.sent,t.next=17,Object(I.b)(r.service.endpoint,m);case 17:return x=t.sent,o("services/addRunId",{serviceId:r.service.id,runId:m},{root:!0}),o("workflows/addRunId",{workflowId:r.workflow.id,runId:m},{root:!0}),R=d()().utc().format(),c("addRun",{name:r.runName,state:y.state,addedDate:R,updatedDate:R,serviceId:r.service.id,workflowId:r.workflow.id,id:m,runLog:x}),t.abrupt("return",m);case 23:case"end":return t.stop()}}),t)})))()},deleteRuns:function(e,r){return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,c,f,l,d,w;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.commit,o=e.dispatch,c=e.getters,f=y(r),t.prev=2,f.s();case 4:if((l=f.n()).done){t.next=15;break}if(d=l.value,!(w=c.run(d))){t.next=13;break}return t.next=10,o("services/removeRunId",{serviceId:w.serviceId,runId:d},{root:!0});case 10:return t.next=12,o("workflows/removeRunId",{workflowId:w.workflowId,runId:d},{root:!0});case 12:n("deleteRun",d);case 13:t.next=4;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),f.e(t.t0);case 20:return t.prev=20,f.f(),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[2,17,20,23]])})))()},addRun:function(e,r){var t=e.commit,n=e.dispatch;n("services/addRunId",{serviceId:r.serviceId,runId:r.runId},{root:!0}),n("workflows/addRunId",{workflowId:r.workflowId,runId:r.runId},{root:!0});var o=d()().utc().format();t("addRun",{name:r.runName,state:r.runLog.state,addedDate:o,updatedDate:o,serviceId:r.serviceId,workflowId:r.workflowId,id:r.runId,runLog:r.runLog})},updateRun:function(e,r){return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,c,f,l,w;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.commit,o=e.rootGetters,c=e.getters,!(f=c.run(r))){t.next=11;break}if(!(l=o["services/service"](f.serviceId))){t.next=11;break}return t.next=7,Object(I.b)(l.endpoint,r);case 7:w=t.sent,n("setProp",{key:"state",value:w.state,runId:f.id}),n("setProp",{key:"runLog",value:w,runId:f.id}),n("setProp",{key:"updatedDate",value:d()().utc().format(),runId:f.id});case 11:case"end":return t.stop()}}),t)})))()},updateAllRunsStateByService:function(e,r){return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,c,f,l,w,v,k,m,h,x,R,j,_,O,S;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.commit,o=e.rootGetters,!(c=o["services/service"](r))){t.next=35;break}if(f=d()().utc().format(),!o["services/getRuns"](c.id)){t.next=15;break}return t.next=7,Object(I.a)(c.endpoint);case 7:l=t.sent,w={},v=y(l.runs);try{for(v.s();!(k=v.n()).done;)m=k.value,w[m.run_id]=m}catch(e){v.e(e)}finally{v.f()}h=y(c.runIds);try{for(h.s();!(x=h.n()).done;)R=x.value,n("setProp",R in w?{key:"state",value:w[R].state,runId:R}:{key:"state",value:"UNKNOWN",runId:R}),n("setProp",{key:"updatedDate",value:f,runId:R})}catch(e){h.e(e)}finally{h.f()}t.next=35;break;case 15:j=y(c.runIds),t.prev=16,j.s();case 18:if((_=j.n()).done){t.next=27;break}return O=_.value,t.next=22,Object(I.c)(c.endpoint,O).catch((function(e){return{state:"UNKNOWN"}}));case 22:S=t.sent.state,n("setProp",{key:"state",value:S,runId:O}),n("setProp",{key:"updatedDate",value:f,runId:O});case 25:t.next=18;break;case 27:t.next=32;break;case 29:t.prev=29,t.t0=t.catch(16),j.e(t.t0);case 32:return t.prev=32,j.f(),t.finish(32);case 35:case"end":return t.stop()}}),t,null,[[16,29,32,35]])})))()},cancelRun:function(e,r){return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,c,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.rootGetters,o=e.getters,!(c=o.run(r))||!["QUEUED","INITIALIZING","RUNNING","PAUSED"].includes(c.state)){t.next=7;break}if(!(f=n["services/service"](c.serviceId))){t.next=7;break}return t.next=7,Object(I.f)(f.endpoint,r);case 7:case"end":return t.stop()}}),t)})))()}}},390:function(e,r,t){"use strict";t.r(r),t.d(r,"state",(function(){return R})),t.d(r,"getters",(function(){return j})),t.d(r,"mutations",(function(){return _})),t.d(r,"actions",(function(){return O}));t(39),t(9),t(46),t(57);var n=t(64),o=t(5),c=t(16),f=t(7),l=(t(58),t(106),t(14),t(51),t(176),t(28),t(13),t(263),t(264),t(15),t(200),t(40),t(201),t(202),t(203),t(204),t(205),t(206),t(207),t(208),t(209),t(210),t(211),t(212),t(213),t(214),t(215),t(216),t(44),t(20),t(52),t(18)),d=t.n(l),w=t(84),v=t.n(w),k=t(193),m=t(0),h=t(31),I=t(60);function y(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return x(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return x(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,f=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return c=e.done,e},e:function(e){f=!0,o=e},f:function(){try{c||null==t.return||t.return()}finally{if(f)throw o}}}}function x(e,r){(null==r||r>e.length)&&(r=e.length);for(var i=0,t=new Array(r);i<r;i++)t[i]=e[i];return t}d.a.extend(v.a);var R=function(){return{}},j={service:function(e){return function(r){return e[r]}},services:function(e){return Object.values(e)},serviceIds:function(e){return Object.keys(e)},registeredOnlyMode:function(e,r){return function(e){var t=r.service(e);return!!t&&!0===t.serviceInfo.tags.registered_only_mode}},getRuns:function(e,r){return function(e){var t=r.service(e);return!t||!1!==t.serviceInfo.tags.get_runs}},workflowAttachment:function(e,r){return function(e){var t=r.service(e);return!t||!1!==t.serviceInfo.tags.workflow_attachment}},stateColor:function(e,r){return function(e){var t=r.service(e);if(t){var n=t.state;if("Available"===n)return h.a.green.darken1;if("Disconnect"===n)return h.a.red.darken1;if("Unknown"===n)return h.a.grey.darken1}return h.a.grey.darken1}},serviceFilteredByWorkflowId:function(e,r,t,n){return function(e){var t=n["workflows/workflow"](e);if(t)return r.service(t.serviceId)}},serviceFilteredByRunId:function(e,r,t,n){return function(e){var t=n["runs/run"](e);if(t)return r.service(t.serviceId)}},workflowEngines:function(e,r){return function(e){var t=r.service(e);return t?Object.entries(t.serviceInfo.workflow_engine_versions).map((function(e){var r=Object(f.a)(e,2);return{name:r[0],version:r[1]}})):[]}},workflowLanguages:function(e,r){return function(e){var t=r.service(e);return t?Object.entries(t.serviceInfo.workflow_type_versions).map((function(e){var r=Object(f.a)(e,2);return{name:r[0],versions:r[1].workflow_type_version}})):[]}},workflowEngineVersion:function(e,r){return function(e){var t,n=y(r.workflowEngines(e.serviceId));try{for(n.s();!(t=n.n()).done;){var o=t.value;if(o.name===e.workflowEngine)return o.version}}catch(e){n.e(e)}finally{n.f()}return""}}},_={clearServices:function(e,r){for(var t=0,n=Object.keys(e);t<n.length;t++){var o=n[t];!(o in e)||!r&&e[o].preRegistered||m.a.delete(e,o)}},deleteService:function(e,r){m.a.delete(e,r)},setService:function(e,r){m.a.set(e,r.id,r)},setProp:function(e,r){if(r.serviceId in e&&(m.a.set(e[r.serviceId],r.key,r.value),"object"===Object(c.a)(r.value)&&"workflow_type_versions"in r.value))for(var t=r.value,n=0,o=Object.entries(t);n<o.length;n++){var l=Object(f.a)(o[n],2),d=l[0],w=l[1];if(null===w||"object"!==Object(c.a)(w))m.a.set(e[r.serviceId].serviceInfo,d,w);else for(var v=0,k=Object.entries(w);v<k.length;v++){var h=Object(f.a)(k[v],2),I=h[0],y=h[1];m.a.set(e[r.serviceId].serviceInfo[d],I,y)}}}},O={clearServices:function(e,r){(0,e.commit)("clearServices",!!(null==r?void 0:r.force))},submitService:function(e,r){return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,c,f,l,w,v,m,h,x,R,j;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.commit,o=e.dispatch,t.next=3,Object(I.d)(r.endpoint).then((function(e){return{serviceInfo:e,state:"Available"}})).catch((function(e){return{serviceInfo:{workflow_type_versions:{},supported_wes_versions:[],supported_filesystem_protocols:[],workflow_engine_versions:{},default_workflow_engine_parameters:[],system_state_counts:{},auth_instructions_url:"",contact_info_url:"",tags:{},executable_workflows:[]},state:"Disconnect"}}));case 3:if(c=t.sent,f=c.serviceInfo,l=c.state,w=Object(k.a)(),v=[],!f.executable_workflows){t.next=28;break}m=y(f.executable_workflows),t.prev=10,m.s();case 12:if((h=m.n()).done){t.next=20;break}return x=h.value,t.next=16,o("workflows/addWorkflow",{serviceId:w,workflow:x,preRegistered:!0},{root:!0});case 16:R=t.sent,v.push(R);case 18:t.next=12;break;case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(10),m.e(t.t0);case 25:return t.prev=25,m.f(),t.finish(25);case 28:return j=d()().utc().format(),n("setService",{name:r.name,endpoint:r.endpoint,state:l,addedDate:j,updateDate:j,preRegistered:r.preRegistered,id:w,workflowIds:v,runIds:[],serviceInfo:f}),t.abrupt("return",w);case 31:case"end":return t.stop()}}),t,null,[[10,22,25,28]])})))()},deleteServices:function(e,r){var t,n=e.commit,o=e.dispatch,c=e.getters,f=r.map((function(e){return c.service(e)})).filter((function(e){return e&&!e.preRegistered})),l=f.flatMap((function(e){return e.workflowIds})),d=f.flatMap((function(e){return e.runIds})),w=y(f);try{for(w.s();!(t=w.n()).done;){n("deleteService",t.value.id)}}catch(e){w.e(e)}finally{w.f()}o("workflows/deleteWorkflows",{workflowIds:l,force:!0},{root:!0}),o("runs/deleteRuns",d,{root:!0})},updateService:function(e,r){return Object(o.a)(regeneratorRuntime.mark((function t(){var c,f,l,w,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=e.commit,f=e.getters,l=e.rootGetters,w=e.dispatch,!(v=f.service(r))){t.next=6;break}return t.next=5,Object(I.d)(v.endpoint).then(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t){var o,f,d,k,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c("setProp",{key:"serviceInfo",value:t,serviceId:r}),!t.executable_workflows){e.next=20;break}o=new Set(t.executable_workflows.map((function(e){return e.workflow_name}))),f=new Set(l["workflows/workflowsByIds"](v.workflowIds).filter((function(e){return e.preRegistered})).map((function(e){return e.name}))),d=y(new Set([].concat(Object(n.a)(o),Object(n.a)(f)))),e.prev=5,m=regeneratorRuntime.mark((function e(){var n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=k.value,!o.has(n)||!f.has(n)){e.next=6;break}return e.next=4,w("workflows/updateWorkflow",{serviceId:r,workflowId:l["workflows/workflowsByIds"](v.workflowIds).filter((function(e){return e.name===n}))[0].id,workflow:t.executable_workflows.filter((function(e){return e.workflow_name===n}))[0]},{root:!0});case 4:e.next=14;break;case 6:if(!o.has(n)||f.has(n)){e.next=13;break}return e.next=9,w("workflows/addWorkflow",{serviceId:r,workflow:t.executable_workflows.filter((function(e){return e.workflow_name===n}))[0],preRegistered:!0},{root:!0});case 9:c=e.sent,w("addWorkflowId",{serviceId:r,workflowId:c}),e.next=14;break;case 13:!o.has(n)&&f.has(n)&&w("workflows/deleteWorkflows",{workflowIds:[l["workflows/workflowsByIds"](v.workflowIds).filter((function(e){return e.name===n}))[0].id],force:!0},{root:!0});case 14:case"end":return e.stop()}}),e)})),d.s();case 8:if((k=d.n()).done){e.next=12;break}return e.delegateYield(m(),"t0",10);case 10:e.next=8;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(5),d.e(e.t1);case 17:return e.prev=17,d.f(),e.finish(17);case 20:c("setProp",{key:"state",value:"Available",serviceId:r});case 21:case"end":return e.stop()}}),e,null,[[5,14,17,20]])})));return function(r){return e.apply(this,arguments)}}()).catch((function(e){c("setProp",{key:"state",value:"Disconnect",serviceId:r})}));case 5:c("setProp",{key:"updatedDate",value:d()().utc().format(),serviceId:r});case 6:case"end":return t.stop()}}),t)})))()},updateAllServices:function(e){return Object(o.a)(regeneratorRuntime.mark((function r(){var t,n,o,c,f,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t=e.getters,n=e.dispatch,o=[],c=y(t.serviceIds);try{for(c.s();!(f=c.n()).done;)l=f.value,o.push(n("updateService",l))}catch(e){c.e(e)}finally{c.f()}return r.next=6,Promise.all(o);case 6:case"end":return r.stop()}}),r)})))()},addWorkflowId:function(e,r){var t=e.commit,o=e.getters.service(r.serviceId);o&&t("setProp",{key:"workflowIds",value:Array.from(new Set([].concat(Object(n.a)(o.workflowIds),[r.workflowId]))),serviceId:r.serviceId})},removeWorkflowId:function(e,r){var t=e.commit,n=e.getters.service(r.serviceId);n&&t("setProp",{key:"workflowIds",value:n.workflowIds.filter((function(e){return e!==r.workflowId})),serviceId:r.serviceId})},addRunId:function(e,r){var t=e.commit,o=e.getters.service(r.serviceId);o&&t("setProp",{key:"runIds",value:Array.from(new Set([].concat(Object(n.a)(o.runIds),[r.runId]))),serviceId:r.serviceId})},removeRunId:function(e,r){var t=e.commit,n=e.getters.service(r.serviceId);n&&t("setProp",{key:"runIds",value:n.runIds.filter((function(e){return e!==r.runId})),serviceId:r.serviceId})}}},392:function(e,r,t){"use strict";t.r(r),t.d(r,"state",(function(){return I})),t.d(r,"getters",(function(){return y})),t.d(r,"mutations",(function(){return x})),t.d(r,"actions",(function(){return R}));t(9),t(46),t(57);var n=t(64),o=t(5),c=(t(58),t(106),t(13),t(51),t(14),t(28),t(15),t(39),t(29),t(56),t(263),t(264),t(52),t(40),t(200),t(201),t(202),t(203),t(204),t(205),t(206),t(207),t(208),t(209),t(210),t(211),t(212),t(213),t(214),t(215),t(216),t(44),t(20),t(193)),f=t(18),l=t.n(f),d=t(84),w=t.n(d),v=t(0),k=t(70);function m(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return h(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return h(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,f=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return c=e.done,e},e:function(e){f=!0,o=e},f:function(){try{c||null==t.return||t.return()}finally{if(f)throw o}}}}function h(e,r){(null==r||r>e.length)&&(r=e.length);for(var i=0,t=new Array(r);i<r;i++)t[i]=e[i];return t}l.a.extend(w.a);var I=function(){return{}},y={workflow:function(e){return function(r){return e[r]}},workflows:function(e){return Object.values(e)},workflowsByIds:function(e,r){return function(e){return e.map((function(e){return r.workflow(e)})).filter((function(e){return e}))}},workflowIds:function(e){return Object.keys(e)},workflowFilteredByRunId:function(e,r,t,n){return function(e){var t=n["runs/run"](e);if(t)return r.workflow(t.workflowId)}},tableItems:function(e,r){return function(e){var t,n=[],o=m(r.workflowsByIds(e));try{for(o.s();!(t=o.n()).done;){var c=t.value;n.push({workflowId:c.id,workflowName:c.name,workflowType:c.type,workflowVersion:c.version,date:c.preRegistered?l()(c.updatedDate).local().format("YYYY-MM-DD HH:mm:ss"):l()(c.addedDate).local().format("YYYY-MM-DD HH:mm:ss"),preRegistered:c.preRegistered})}}catch(e){o.e(e)}finally{o.f()}return n}}},x={clearWorkflows:function(e,r){for(var t=0,n=Object.keys(e);t<n.length;t++){var o=n[t];!(o in e)||!r&&e[o].preRegistered||v.a.delete(e,o)}},deleteWorkflow:function(e,r){v.a.delete(e,r)},setWorkflow:function(e,r){v.a.set(e,r.id,r)},setProp:function(e,r){r.workflowId in e&&v.a.set(e[r.workflowId],r.key,r.value)}},R={clearWorkflows:function(e,r){(0,e.commit)("clearWorkflows",!!(null==r?void 0:r.force))},submitWorkflow:function(e,r){var t=e.commit,n=e.dispatch,o=Object(c.a)();n("services/addWorkflowId",{serviceId:r.serviceId,workflowId:o},{root:!0});var f=l()();return t("setWorkflow",{name:r.name,type:r.type,version:r.version,url:r.url,content:r.content,addedDate:f,updatedDate:f,preRegistered:r.preRegistered,preRegisteredWorkflowAttachment:[],serviceId:r.serviceId,id:o,runIds:[]}),o},addWorkflow:function(e,r){return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,content,f,d,w,v,h,I,y,x,R,j;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.commit,o=Object(c.a)(),content="",!Object(k.e)(r.workflow.workflow_url)){t.next=17;break}return t.next=6,Object(k.b)(r.workflow.workflow_url);case 6:return f=t.sent,t.next=9,fetch(f,{method:"GET"});case 9:if((d=t.sent).ok){t.next=12;break}throw new Error("Failed to fetch workflow from ".concat(f));case 12:return t.next=14,d.text();case 14:content=t.sent,t.next=47;break;case 17:w=r.workflow.workflow_url.split("/").slice(-1)[0],v=m(r.workflow.workflow_attachment),t.prev=19,v.s();case 21:if((h=v.n()).done){t.next=39;break}if(I=h.value,y=I.file_name.split("/").slice(-1)[0],w!==y){t.next=37;break}return t.next=27,Object(k.b)(I.file_url);case 27:return x=t.sent,t.next=30,fetch(x,{method:"GET"});case 30:if((R=t.sent).ok){t.next=33;break}throw new Error("Failed to fetch workflow from ".concat(x));case 33:return t.next=35,R.text();case 35:return content=t.sent,t.abrupt("break",39);case 37:t.next=21;break;case 39:t.next=44;break;case 41:t.prev=41,t.t0=t.catch(19),v.e(t.t0);case 44:return t.prev=44,v.f(),t.finish(44);case 47:return j=l()(),n("setWorkflow",{name:r.workflow.workflow_name,type:r.workflow.workflow_type,version:r.workflow.workflow_type_version,url:r.workflow.workflow_url,content:content,addedDate:j,updatedDate:j,preRegistered:r.preRegistered,preRegisteredWorkflowAttachment:r.workflow.workflow_attachment,serviceId:r.serviceId,id:o,runIds:[]}),t.abrupt("return",o);case 50:case"end":return t.stop()}}),t,null,[[19,41,44,47]])})))()},updateWorkflow:function(e,r){return Object(o.a)(regeneratorRuntime.mark((function t(){var n,content,o,c,f,d,w,v,h,I,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.commit,content="",!Object(k.e)(r.workflow.workflow_url)){t.next=16;break}return t.next=5,Object(k.b)(r.workflow.workflow_url);case 5:return o=t.sent,t.next=8,fetch(o,{method:"GET"});case 8:if((c=t.sent).ok){t.next=11;break}throw new Error("Failed to fetch workflow from ".concat(o));case 11:return t.next=13,c.text();case 13:content=t.sent,t.next=46;break;case 16:f=r.workflow.workflow_url.split("/").slice(-1)[0],d=m(r.workflow.workflow_attachment),t.prev=18,d.s();case 20:if((w=d.n()).done){t.next=38;break}if(v=w.value,h=v.file_name.split("/").slice(-1)[0],f!==h){t.next=36;break}return t.next=26,Object(k.b)(v.file_url);case 26:return I=t.sent,t.next=29,fetch(I,{method:"GET"});case 29:if((y=t.sent).ok){t.next=32;break}throw new Error("Failed to fetch workflow from ".concat(I));case 32:return t.next=34,y.text();case 34:return content=t.sent,t.abrupt("break",38);case 36:t.next=20;break;case 38:t.next=43;break;case 40:t.prev=40,t.t0=t.catch(18),d.e(t.t0);case 43:return t.prev=43,d.f(),t.finish(43);case 46:n("setProp",{key:"type",value:r.workflow.workflow_type,workflowId:r.workflowId}),n("setProp",{key:"version",value:r.workflow.workflow_type_version,workflowId:r.workflowId}),n("setProp",{key:"url",value:r.workflow.workflow_url,workflowId:r.workflowId}),n("setProp",{key:"content",value:content,workflowId:r.workflowId}),n("setProp",{key:"updatedDate",value:l()(),workflowId:r.workflowId}),n("setProp",{key:"preRegisteredWorkflowAttachment",value:r.workflow.workflow_attachment,workflowId:r.workflowId});case 52:case"end":return t.stop()}}),t,null,[[18,40,43,46]])})))()},deleteWorkflows:function(e,r){var t,n=e.commit,o=e.dispatch,c=e.getters,f=e.rootGetters,l=r.workflowIds.map((function(e){return c.workflow(e)})).filter((function(e){return e&&(!!r.force||!e.preRegistered)})),d=l.flatMap((function(e){return e.runIds})),w=m(l);try{for(w.s();!(t=w.n()).done;){var v=t.value;o("services/removeWorkflowId",{serviceId:v.serviceId,workflowId:v.id},{root:!0}),n("deleteWorkflow",v.id)}}catch(e){w.e(e)}finally{w.f()}var k,h=m(d);try{for(h.s();!(k=h.n()).done;){var I=k.value,y=f["runs/run"](I);y&&(o("services/removeRunId",{serviceId:y.serviceId,runId:I},{root:!0}),n("runs/deleteRun",I,{root:!0}))}}catch(e){h.e(e)}finally{h.f()}},addRunId:function(e,r){var t=e.commit,o=e.getters.workflow(r.workflowId);o&&t("setProp",{key:"runIds",value:Array.from(new Set([].concat(Object(n.a)(o.runIds),[r.runId]))),workflowId:r.workflowId})},removeRunId:function(e,r){var t=e.commit,n=e.getters.workflow(r.workflowId);n&&t("setProp",{key:"runIds",value:n.runIds.filter((function(e){return e!==r.runId})),workflowId:r.workflowId})}}},60:function(e,r,t){"use strict";t.d(r,"d",(function(){return o})),t.d(r,"a",(function(){return c})),t.d(r,"e",(function(){return f})),t.d(r,"b",(function(){return l})),t.d(r,"f",(function(){return d})),t.d(r,"c",(function(){return w}));var n=t(5),o=(t(58),t(15),t(20),function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(r){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(r,"/service-info"),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("".concat(t.status," ").concat(t.statusText));case 5:return e.abrupt("return",t.json());case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()),c=function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(r){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(r,"/runs"),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("".concat(t.status," ").concat(t.statusText));case 5:return e.abrupt("return",t.json());case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),f=function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(r,data){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(r,"/runs"),{method:"POST",body:data});case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("".concat(t.status," ").concat(t.statusText));case 5:return e.abrupt("return",t.json());case 6:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),l=function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(r,t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(r,"/runs/").concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("".concat(n.status," ").concat(n.statusText));case 5:return e.abrupt("return",n.json());case 6:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),d=function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(r,t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(r,"/runs/").concat(t,"/cancel"),{method:"POST",headers:{"Content-Type":"application/json"}});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("".concat(n.status," ").concat(n.statusText));case 5:return e.abrupt("return",n.json());case 6:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),w=function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(r,t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(r,"/runs/").concat(t,"/status"),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("".concat(n.status," ").concat(n.statusText));case 5:return e.abrupt("return",n.json());case 6:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}()},70:function(e,r,t){"use strict";t.d(r,"e",(function(){return f})),t.d(r,"b",(function(){return l})),t.d(r,"c",(function(){return d})),t.d(r,"d",(function(){return w})),t.d(r,"a",(function(){return v})),t.d(r,"f",(function(){return k}));var n=t(5),o=(t(58),t(15),t(40),t(44),t(196),t(80),t(39),t(29),t(56),t(20),t(79),t(151)),c=t.n(o),f=function(e){var r;try{r=new URL(e)}catch(e){return!1}return"http:"===r.protocol||"https:"===r.protocol},l=function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(r){var t,n,o,c,f,content;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("github.com"!==(t=new URL(r)).host){e.next=15;break}return n=t.pathname.split("/").slice(1,3).join("/"),o=t.pathname.split("/").slice(5).join("/"),t.host="api.github.com",t.pathname="repos/".concat(n,"/contents/").concat(o),c=t.toString(),e.next=9,fetch(c,{headers:{Accept:"application/vnd.github.v3.raw"},method:"GET"});case 9:if(200!==(f=e.sent).status){e.next=15;break}return e.next=13,f.json();case 13:return content=e.sent,e.abrupt("return",content.download_url);case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),d=function(content){try{return JSON.parse(content),!0}catch(e){}return!1},w=function(content){try{return c.a.load(content),!0}catch(e){}return!1},v=function(content){return d(content)?"application/json":w(content)?"text/yaml":"default"},k=function(content){return w(content)?JSON.stringify(c.a.load(content),null,2):content}},85:function(e,r,t){"use strict";var n=t(0),o={components:{AppBar:t(197).a},props:{error:{}}},c=n.a.extend(o),f=t(75),l=t(124),d=t.n(l),w=t(405),v=t(399),k=t(406),m=t(409),h=t(407),component=Object(f.a)(c,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("v-app",[t("app-bar"),e._v(" "),t("v-main",{staticClass:"background"},[t("v-container",{attrs:{fluid:""}},[t("v-card",{staticClass:"mx-auto",attrs:{"max-width":"1200"}},[t("div",{staticClass:"d-flex flex-column mx-6 pt-4"},[t("div",{staticClass:"card-header",style:{color:e.$vuetify.theme.themes.light.error},domProps:{textContent:e._s("Error occurred!!")}}),e._v(" "),t("div",{staticClass:"mx-6",domProps:{textContent:e._s("An unexpected error has occurred.")}}),e._v(" "),t("div",{staticClass:"mx-6 mt-2 mb-6 elevation-2 pa-2",style:{whiteSpace:"pre-wrap",wordWrap:"break-word",outline:"solid 1px "+e.$colors.grey.lighten1},domProps:{textContent:e._s(JSON.stringify(e.error,null,2))}})]),e._v(" "),t("div",{staticClass:"d-flex justify-end pb-4"},[t("v-btn",{staticClass:"mr-12",attrs:{outlined:"",color:e.$colors.grey.darken2},domProps:{textContent:e._s("Back to Home")},on:{click:function(r){return r.stopPropagation(),e.$router.push("/")}}})],1)])],1)],1)],1)}),[],!1,null,null,null);r.a=component.exports;d()(component,{VApp:w.a,VBtn:v.a,VCard:k.a,VContainer:m.a,VMain:h.a})}},[[287,10,4,11]]]);