(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{413:function(t,e,n){"use strict";var r=n(0).a.extend({data:function(){return{version:"1.1.1"}}}),o=n(74),l=n(124),c=n.n(l),f=n(491),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-footer",{attrs:{color:t.$colors.indigo.darken1,absolute:"",app:"",height:"24",padless:""}},[n("div",{staticClass:"mx-auto my-auto"},[n("span",{staticClass:"white--text",style:{fontSize:"12px"}},[t._v("\n      sapporo-web "+t._s(t.version)+" Â© Bioinformation and DDBJ Center\n    ")])])])}),[],!1,null,null,null);e.a=component.exports;c()(component,{VFooter:f.a})},424:function(t,e,n){"use strict";n(23),n(15),n(57),n(75),n(35);var r={data:function(){return{type:"",id:""}},computed:{items:function(){var t=[{text:"Home",nuxt:!0,to:"/",icon:"mdi-home-outline"}];if("service"===this.type){var e=this.$store.getters["services/service"](this.id);e&&t.push({text:e.name,nuxt:!0,to:"/services?serviceId=".concat(e.id),icon:"mdi-dns-outline"})}else if("workflow"===this.type){var n=this.$store.getters["workflows/workflow"](this.id);if(n){var r=this.$store.getters["services/service"](n.serviceId);r&&t.push({text:r.name,nuxt:!0,to:"/services?serviceId=".concat(r.id),icon:"mdi-dns-outline"}),t.push({text:n.name,nuxt:!0,to:"/workflows?workflowId=".concat(n.id),icon:"mdi-graph-outline"})}}else if("run"===this.type){var o=this.$store.getters["runs/run"](this.id);if(o){var l=this.$store.getters["workflows/workflow"](o.workflowId);if(l){var c=this.$store.getters["services/service"](o.serviceId);c&&t.push({text:c.name,nuxt:!0,to:"/services?serviceId=".concat(c.id),icon:"mdi-dns-outline"}),t.push({text:l.name,nuxt:!0,to:"/workflows?workflowId=".concat(l.id),icon:"mdi-graph-outline"})}t.push({text:o.name,nuxt:!0,to:"/runs?runId=".concat(o.id),icon:"mdi-chart-box-outline"})}}return t}},created:function(){for(var t=this.$route.query,e=0,n=Object.keys(t);e<n.length;e++){var r=n[e];if(r.includes("Id")){this.type=r.slice(0,-2);var o=t[r]||"";Array.isArray(o)&&(o=o[0]||""),this.id=o;break}}}},o=n(0).a.extend(r),l=n(74),c=n(124),f=n.n(c),d=n(607),m=n(494),h=n(399),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-breadcrumbs",{staticClass:"pt-2",attrs:{items:t.items,large:""},scopedSlots:t._u([{key:"divider",fn:function(){return[n("v-icon",{domProps:{textContent:t._s("mdi-chevron-right")}})]},proxy:!0},{key:"item",fn:function(e){var r=e.item;return[n("v-breadcrumbs-item",{attrs:{nuxt:r.nuxt,to:r.to}},[n("v-icon",{attrs:{color:t.$colors.grey.darken2,left:""},domProps:{textContent:t._s(r.icon)}}),t._v(" "),n("span",{domProps:{textContent:t._s(r.text)}})],1)]}}])})}),[],!1,null,null,null);e.a=component.exports;f()(component,{VBreadcrumbs:d.a,VBreadcrumbsItem:m.a,VIcon:h.a})},426:function(t,e,n){"use strict";n(44);var r={props:{wfType:{type:String,default:""},size:{type:Number,default:26},topMargin:{type:Boolean,default:!0}}},o=n(74),l=n(124),c=n.n(l),f=n(399),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return"CWL"===t.wfType?r("img",{class:{"mt-2":t.topMargin,"mr-2":!0},attrs:{src:n(429),height:t.size}}):"WDL"===t.wfType?r("img",{class:{"mt-2":t.topMargin,"mr-2":!0},attrs:{src:n(430),height:t.size}}):"nextflow"===t.wfType.toLowerCase()||"NFL"===t.wfType?r("img",{class:{"mt-2":t.topMargin,"mr-2":!0},attrs:{src:n(431),height:t.size}}):"snakemake"===t.wfType.toLowerCase()||"SMK"===t.wfType?r("img",{class:{"mt-2":t.topMargin,"mr-2":!0},attrs:{src:n(432),height:t.size}}):r("v-icon",{staticClass:"my-2 mr-2",domProps:{textContent:t._s("mdi-graph-outline")}})}),[],!1,null,null,null);e.a=component.exports;c()(component,{VIcon:f.a})},429:function(t,e,n){t.exports=n.p+"img/cwl-icon.d6a463e.png"},430:function(t,e,n){t.exports=n.p+"img/wdl-icon.3954ce4.png"},431:function(t,e,n){t.exports=n.p+"img/nextflow-icon.5351591.png"},432:function(t,e,n){t.exports=n.p+"img/snakemake-icon.b8289bc.png"},482:function(t,e,n){var content=n(581);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(32).default)("680e4c9f",content,!0,{sourceMap:!1})},483:function(t,e,n){var content=n(583);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(32).default)("07848938",content,!0,{sourceMap:!1})},484:function(t,e,n){var content=n(587);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(32).default)("13925353",content,!0,{sourceMap:!1})},580:function(t,e,n){"use strict";n(482)},581:function(t,e,n){var r=n(31)(!1);r.push([t.i,".v-label{color:#424242!important}",""]),t.exports=r},582:function(t,e,n){"use strict";n(483)},583:function(t,e,n){var r=n(31)(!1);r.push([t.i,'.field-header[data-v-45c6b25c]{font-size:1.1rem;font-weight:400}.input-field-small[data-v-45c6b25c] .CodeMirror{height:150px!important;font-size:.9rem!important}.input-field-small[data-v-45c6b25c] .CodeMirror-lines{font-family:"Fira Code",monospace,sans-serif!important}.input-field-middle[data-v-45c6b25c] .CodeMirror{height:300px!important;font-size:.9rem!important}.input-field-middle[data-v-45c6b25c] .CodeMirror-lines{font-family:"Fira Code",monospace,sans-serif!important}',""]),t.exports=r},586:function(t,e,n){"use strict";n(484)},587:function(t,e,n){var r=n(31)(!1);r.push([t.i,'.content-viewer[data-v-39ba9337] .CodeMirror{height:250px!important;font-size:.9rem!important}.content-viewer[data-v-39ba9337] .CodeMirror-lines{font-family:"Fira Code",monospace,sans-serif!important}.info-table[data-v-39ba9337] td:first-child{width:270px;font-weight:500}.info-table[data-v-39ba9337] tr:not(:last-child) td{border-bottom:none!important}',""]),t.exports=r},600:function(t,e,n){"use strict";n.r(e);var r=n(5),o=(n(57),n(75),n(58),n(0)),l=n(199),c=n(413),f=n(424),d=(n(53),n(23),n(19),n(125),n(24),n(59),n(11),n(33),n(36),n(156),n(35),n(47),n(9),n(45),n(54),n(420),n(421),n(422),n(423)),m=n(127),h=n(51);n(284),n(14),n(44);function v(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return w(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return l=t.done,t},e:function(t){c=!0,o=t},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var y={props:{inputs:{type:Array,required:!0}},data:function(){return{valObj:{},secondaryFilesObj:{},foo:!0}},computed:{values:function(){var t=this;return function(e){var n;if(t.valObj[e])return t.valObj[e];var r=null===(n=t.inputs.find((function(input){return input.id===e})))||void 0===n?void 0:n.default;return o.a.set(t.valObj,e,[r]),t.valObj[e]}},formType:function(){return function(t){switch(t){case"File":case"Directory":case"string":case"Any":return"text";case"int":return"number";default:return"text"}}},secondaryFiles:function(){var t=this;return function(e){var n;if(t.valObj[e]){var r=(null===(n=t.inputs.find((function(input){return input.id===e})))||void 0===n?void 0:n.secondaryFiles)||[];return t.secondaryFilesObj[e]||o.a.set(t.secondaryFilesObj,e,Array(r.length).fill(null)),r}return[]}},secondaryFilesValue:function(){var t=this;return function(e,n){var r,o;return(null===(o=null===(r=t.secondaryFilesObj)||void 0===r?void 0:r[e])||void 0===o?void 0:o[n])||null}},secondaryFilesRules:function(){var t=this;return function(e,n){var r=t.secondaryFiles(e)[n],o=t.secondaryFilesValue(e,n),l=".".concat(null==o?void 0:o.split(".").pop());return r.required&&!o?["This field is required"]:o&&r.pattern!==l?["It must have the extension ".concat(r.pattern)]:[]}}},methods:{updateValue:function(t,e,n){this.valObj[e]&&o.a.set(this.valObj[e],n,t)},updateSecondaryFiles:function(t,e,n){this.secondaryFilesObj[e]&&o.a.set(this.secondaryFilesObj[e],n,t)},addArray:function(t){this.valObj[t]&&this.valObj[t].push(null)},removeArray:function(t){this.valObj[t]&&this.valObj[t].length>1&&this.valObj[t].pop()},validate:function(){return!!this.$refs.form&&this.$refs.form.validate()},toParams:function(){var t=this;if(this.validate()){var e,n={},r=v(this.inputs);try{var o=function(){var input=e.value;if("File"===input.type||"Directory"===input.type)if(input.array){var r=t.valObj[input.id].map((function(t){return{location:t,class:input.type}}));n[input.id]=r}else{var o=t.valObj[input.id][0];if(o){var l={location:o,class:input.type};if(input.secondaryFiles){var c=t.secondaryFilesObj[input.id];Object.assign(l,{secondaryFiles:c.filter((function(t){return null!==t})).map((function(t){return{location:t,class:"File"}}))})}n[input.id]=l}}else if("string"===input.type||"Any"===input.type)if(input.array){var f=t.valObj[input.id];n[input.id]=f}else{var d=t.valObj[input.id][0];n[input.id]=d||null}else if("int"===input.type)if(input.array){var m=t.valObj[input.id];n[input.id]=m.map((function(t){return Number(t)}))}else{var h=t.valObj[input.id][0];n[input.id]=h?Number(h):null}else if("boolean"===input.type){var v=t.valObj[input.id][0];n[input.id]=!!v}};for(r.s();!(e=r.n()).done;)o()}catch(t){r.e(t)}finally{r.f()}return JSON.stringify(n)}return""}}},x=o.a.extend(y),_=(n(580),n(74)),k=n(124),C=n.n(k),P=n(400),A=n(591),E=n(577),M=n(399),O=n(464),component=Object(_.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-form",{ref:"form",staticClass:"flex-grow-1 mr-4"},[t._l(t.inputs,(function(input){return[["File","Directory","string","Any","int"].includes(input.type)?[n("div",{key:input.id,staticClass:"d-flex flex-column"},[n("label",[n("span",{domProps:{textContent:t._s(input.label||input.id)}}),t._v(" "),n("span",{staticClass:"red--text",domProps:{textContent:t._s(input.required?"*":"")}})]),t._v(" "),n("div",{staticClass:"d-flex ml-4 mb-2"},[n("div",{staticClass:"d-flex flex-column flex-grow-1"},[t._l(t.values(input.id),(function(e,r){return[n("v-text-field",{key:input.id+"-textfield-"+r,staticClass:"pt-1 mt-0",attrs:{hint:0===r?input.doc:"",placeholder:""+input.type,rules:input.required&&!e?["This field is required"]:[],type:t.formType(input.type),value:e,"persistent-hint":""},on:{input:function(e){return t.updateValue(e,input.id,r)}}})]})),t._v(" "),input.secondaryFiles?[t._l(t.secondaryFiles(input.id),(function(e,r){return[n("v-text-field",{key:input.id+"-secondaryFiles-"+r,staticClass:"pt-1 mt-0 ml-4",attrs:{value:t.secondaryFilesValue(input.id,r),hint:"pattern: "+e.pattern,placeholder:"SecondaryFiles"+(e.required?" *":"")+": "+e.pattern,rules:t.secondaryFilesRules(input.id,r),"persistent-hint":""},on:{input:function(e){return t.updateSecondaryFiles(e,input.id,r)}}})]}))]:t._e()],2),t._v(" "),input.array?n("div",{staticClass:"d-flex"},[n("v-btn",{staticClass:"ml-6",attrs:{color:t.$colors.grey.darken2,outlined:"",small:"",width:"100"},on:{click:function(e){return e.stopPropagation(),t.addArray(input.id)}}},[n("v-icon",{attrs:{left:""},domProps:{textContent:t._s("mdi-text-box-plus-outline")}}),t._v(" "),n("span",{domProps:{textContent:t._s("Add")}})],1),t._v(" "),n("v-btn",{staticClass:"ml-2",attrs:{color:t.$colors.grey.darken2,outlined:"",small:"",width:"100"},on:{click:function(e){return e.stopPropagation(),t.removeArray(input.id)}}},[n("v-icon",{attrs:{left:""},domProps:{textContent:t._s("mdi-text-box-minus-outline")}}),t._v(" "),n("span",{domProps:{textContent:t._s("Remove")}})],1)],1):t._e()])])]:t._e(),t._v(" "),"boolean"===input.type?[t._l(t.values(input.id),(function(t,e){return[n("v-checkbox",{key:input.id+"-checkbox-"+e,attrs:{hint:0===e?input.doc:"","input-value":t,label:""+(input.label||input.id),"persistent-hint":""}})]}))]:t._e()]}))],2)}),[],!1,null,null,null),j=component.exports;function $(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return I(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return l=t.done,t},e:function(t){c=!0,o=t},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}C()(component,{VBtn:P.a,VCheckbox:A.a,VForm:E.a,VIcon:M.a,VTextField:O.a});var W={components:{codemirror:d.codemirror,WfParamsForm:j},props:{workflowId:{type:String,required:!0}},data:function(){return{runName:"",wfEngine:"",attachmentMode:void 0,wfAttachment:{fetch:{urls:[null],names:[null]},upload:{files:[null],names:[null]}},wfParamsMode:null,wfParamsInputs:[],wfParams:"{}",wfEngineParams:"{}",wfEngineParamsExpand:!1,tags:"{}",tagsExpand:!1,executeButton:!0}},computed:{service:function(){return this.$store.getters["services/service"](this.workflow.serviceId)},wesVersion:function(){return this.$store.getters["services/wesVersion"](this.workflow.serviceId)},inputsParsable:function(){return"sapporo-1.0.1"===this.wesVersion&&"CWL"===this.workflow.type},showWfParamsText:function(){return!this.inputsParsable||"text"===this.wfParamsMode},showWfParamsForm:function(){return!!this.inputsParsable&&"form"===this.wfParamsMode},serviceWorkflowAttachment:function(){return this.$store.getters["services/workflowAttachment"](this.workflow.serviceId)},workflow:function(){return this.$store.getters["workflows/workflow"](this.workflowId)},runNames:function(){return this.$store.getters["runs/runsByIds"](this.service.runIds).map((function(t){return t.name}))},runNameRules:function(){return this.runName?this.runNames.includes(this.runName)?["Typed name already exists"]:[]:["Required"]},wfEngines:function(){return this.$store.getters["services/workflowEngines"](this.service.id).map((function(t){return"".concat(t.name," ").concat(t.version)}))},wfEngineRules:function(){return this.wfEngine?[]:["Required"]},wfAttachmentRules:function(){for(var t={fetch:{urls:[],names:[]},upload:{files:[],names:[]}},i=0;i<this.wfAttachment.fetch.names.length;i++)!!this.wfAttachment.fetch.urls[i]!=!!this.wfAttachment.fetch.names[i]?(this.wfAttachment.fetch.urls[i]||(t.fetch.urls.push(["No value in this field"]),t.fetch.names.push([])),this.wfAttachment.fetch.names[i]||(t.fetch.urls.push([]),t.fetch.names.push(["No value in this field"]))):(t.fetch.urls.push([]),t.fetch.names.push([]));for(var e=0;e<this.wfAttachment.upload.names.length;e++)!!this.wfAttachment.upload.files[e]!=!!this.wfAttachment.upload.names[e]?(this.wfAttachment.upload.files[e]||(t.upload.files.push(["No value in this field"]),t.upload.names.push([])),this.wfAttachment.upload.names[e]||(t.upload.files.push([]),t.upload.names.push(["No value in this field"]))):(t.upload.files.push([]),t.upload.names.push([]));return t},wfParamsError:function(){return Object(m.e)(this.wfParams)||Object(m.f)(this.wfParams)?"":"Invalid JSON or YAML"},wfEngineParamsError:function(){return Object(m.e)(this.wfEngineParams)||Object(m.f)(this.wfEngineParams)?"":"Invalid JSON or YAML"},tagsError:function(){return Object(m.e)(this.tags)||Object(m.f)(this.tags)?"":"Invalid JSON or YAML"},formValid:function(){var t=!(this.wfAttachmentRules.fetch.urls.map((function(t){return t.length})).reduce((function(a,b){return a+b}),0)||this.wfAttachmentRules.fetch.names.map((function(t){return t.length})).reduce((function(a,b){return a+b}),0)||this.wfAttachmentRules.upload.files.map((function(t){return t.length})).reduce((function(a,b){return a+b}),0)||this.wfAttachmentRules.upload.names.map((function(t){return t.length})).reduce((function(a,b){return a+b}),0)),e=!0;return"form"===this.wfParamsMode&&this.$refs.wfParamsForm&&(e=this.$refs.wfParamsForm.validate()),!this.runNameRules.length&&!this.wfEngineRules.length&&!this.wfParamsError&&!this.wfEngineParamsError&&!this.tagsError&&t&&e}},created:function(){var t=this;if(this.runName="".concat(this.workflow.name," ").concat(this.$dayjs().local().format("YYYY-MM-DD HH:mm:ss")),1===this.wfEngines.length&&(this.wfEngine=this.wfEngines[0]),"CWL"===this.workflow.type?this.wfEngine=this.wfEngines.find((function(t){return t.includes("cwltool")}))||"":"WDL"===this.workflow.type?this.wfEngine=this.wfEngines.find((function(t){return t.includes("cromwell")}))||"":"NFL"===this.workflow.type?this.wfEngine=this.wfEngines.find((function(t){return t.includes("nextflow")}))||"":"SMK"===this.workflow.type&&(this.wfEngine=this.wfEngines.find((function(t){return t.includes("snakemake")}))||""),this.workflow.preRegisteredWorkflowAttachment.length){this.wfAttachment.fetch.urls.pop(),this.wfAttachment.fetch.names.pop();var e,n=$(this.workflow.preRegisteredWorkflowAttachment);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.wfAttachment.fetch.urls.push(r.file_url),this.wfAttachment.fetch.names.push(r.file_name)}}catch(t){n.e(t)}finally{n.f()}this.attachmentMode="fetch"}this.inputsParsable&&(this.wfParamsMode="form",Object(h.g)(this.service.endpoint,{workflow_content:this.workflow.content,types_of_parsing:["inputs"]}).then((function(e){t.wfParamsInputs=e.inputs||[]})).catch((function(e){t.wfParamsMode="text"})),this.wfParams="Making template by cwltool...",Object(h.g)(this.service.endpoint,{workflow_content:this.workflow.content,types_of_parsing:["make_template"]}).then((function(e){t.wfParams=e.inputs})).catch((function(e){t.wfParams="{}"})))},watch:{wfEngine:function(){if("sapporo-1.0.1"===this.wesVersion){var t=this.wfEngine.split(" ")[0]||"",e=this.service.serviceInfo.default_workflow_engine_parameters;if(t in e){var n,r={},o=$(e[t]);try{for(o.s();!(n=o.n()).done;){var param=n.value;r[param.name]=param.default_value}}catch(t){o.e(t)}finally{o.f()}this.wfEngineParams=JSON.stringify(r,null,2),this.wfEngineParamsExpand=!0}else this.wfEngineParams="",this.wfEngineParamsExpand=!1}}},methods:{executeRun:function(){var t=this;if(this.formValid||"Available"===this.service.state||this.executeButton){this.executeButton=!1;for(var e=[],i=0;i<this.wfAttachment.fetch.urls.length;i++)this.wfAttachment.fetch.urls[i]&&e.push({file_url:this.wfAttachment.fetch.urls[i],file_name:this.wfAttachment.fetch.names[i]});var n="form"===t.wfParamsMode?t.$refs.wfParamsForm?t.$refs.wfParamsForm.toParams():"{}":Object(m.f)(t.wfParams)?Object(m.h)(t.wfParams):t.wfParams;this.$store.dispatch("runs/executeRun",{service:this.service,workflow:this.workflow,runName:this.runName,wfEngineName:this.wfEngine.split(" ")[0],wfEngineParams:Object(m.f)(this.wfEngineParams)?Object(m.h)(this.wfEngineParams):this.wfEngineParams,tags:Object(m.f)(this.tags)?Object(m.h)(this.tags):this.tags,wfAttachmentText:JSON.stringify(e,null,2),workflowAttachment:this.wfAttachment.upload.files,fileNames:this.wfAttachment.upload.names,wfParams:n}).then((function(e){t.$router.push({path:"/runs",query:{runId:e}})}))}},updateWfAttachmentUrl:function(t,e){if(o.a.set(this.wfAttachment.fetch.urls,e,t),t)try{var n=new URL(t).pathname.split("/").pop()||"";o.a.set(this.wfAttachment.fetch.names,e,n)}catch(t){}},updateWfAttachmentName:function(t,e){o.a.set(this.wfAttachment[this.attachmentMode].names,e,t)},updateWfAttachmentFile:function(t,e){if(o.a.set(this.wfAttachment.upload.files,e,t),t)try{var n=t.name||"";o.a.set(this.wfAttachment.upload.names,e,n)}catch(t){}},addWfAttachment:function(){"fetch"===this.attachmentMode?(this.wfAttachment.fetch.urls.push(null),this.wfAttachment.fetch.names.push(null)):"upload"===this.attachmentMode&&(this.wfAttachment.upload.files.push(null),this.wfAttachment.upload.names.push(null))},removeWfAttachment:function(){"fetch"===this.attachmentMode&&this.wfAttachment.fetch.names.length>1?(this.wfAttachment.fetch.urls.pop(),this.wfAttachment.fetch.names.pop()):"upload"===this.attachmentMode&&this.wfAttachment.fetch.names.length>1&&(this.wfAttachment.upload.files.pop(),this.wfAttachment.upload.names.pop())},codeMirrorMode:function(content){return Object(m.a)(content)}}},S=o.a.extend(W),F=(n(582),n(407)),N=n(467),T=n(576),R=n(598),V=n(485),D=n(405),L=n(597),Y=Object(_.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{attrs:{"max-width":"1200"}},[n("div",{staticClass:"d-flex align-center mx-6 pt-4"},[n("v-icon",{attrs:{color:"black",left:""},domProps:{textContent:t._s("mdi-pencil-outline ")}}),t._v(" "),n("div",{staticClass:"card-header",domProps:{textContent:t._s("Compose Run")}})],1),t._v(" "),n("div",{staticClass:"mx-12 mt-4"},[n("v-text-field",{attrs:{"persistent-hint":!t.runName.length,rules:t.runNameRules,hint:"Name of the run (free text, e.g., 'Test run' etc.)",label:"Run Name",placeholder:"Type a name"},model:{value:t.runName,callback:function(e){t.runName=e},expression:"runName"}}),t._v(" "),n("v-select",{attrs:{items:t.wfEngines,"persistent-hint":!t.wfEngine.length,rules:t.wfEngineRules,hint:"Select the workflow engine",label:"Workflow Engine (Required)"},model:{value:t.wfEngine,callback:function(e){t.wfEngine=e},expression:"wfEngine"}}),t._v(" "),n("div",{staticClass:"d-flex align-center"},[n("span",{style:{color:""+t.$colors.grey.darken2},domProps:{textContent:t._s("Workflow Attachment")}}),t._v(" "),n("v-tooltip",{attrs:{top:"","max-width":"400"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-icon",t._g({attrs:{right:"",small:""},domProps:{textContent:t._s("mdi-help-circle-outline")}},r))]}}])},[t._v(" "),n("span",{domProps:{textContent:t._s("[Optional] A set of files to be fetched/uploaded to the execution directory. You can create a directory structure by writing like `dirname/filename` in the file name field.")}})]),t._v(" "),n("v-chip-group",{staticClass:"ml-6",attrs:{color:"primary"},model:{value:t.attachmentMode,callback:function(e){t.attachmentMode=e},expression:"attachmentMode"}},[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("div",t._g({},!t.serviceWorkflowAttachment&&r),[n("v-chip",{staticClass:"my-0 py-0",attrs:{disabled:!t.serviceWorkflowAttachment,value:"fetch",label:"",outlined:""}},[n("v-icon",{attrs:{left:""},domProps:{textContent:t._s("mdi-download-outline")}}),t._v(" "),n("span",{domProps:{textContent:t._s("Fetch")}})],1)],1)]}}])},[t._v(" "),n("span",{domProps:{textContent:t._s("The WES service does not allow workflow attachment.")}})]),t._v(" "),n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("div",t._g({},!t.serviceWorkflowAttachment&&r),[n("v-chip",{staticClass:"my-0 py-0",attrs:{disabled:!t.serviceWorkflowAttachment,value:"upload",label:"",outlined:""}},[n("v-icon",{attrs:{left:""},domProps:{textContent:t._s("mdi-upload-outline")}}),t._v(" "),n("span",{domProps:{textContent:t._s("Upload")}})],1)],1)]}}])},[t._v(" "),n("span",{domProps:{textContent:t._s("The WES service does not allow workflow attachment.")}})])],1),t._v(" "),n("v-spacer"),t._v(" "),t.attachmentMode&&t.serviceWorkflowAttachment?n("v-btn",{staticClass:"mr-4",attrs:{color:t.$colors.grey.darken2,outlined:"",small:"",width:"120"},on:{click:function(e){return e.stopPropagation(),t.addWfAttachment.apply(null,arguments)}}},[n("v-icon",{attrs:{left:""},domProps:{textContent:t._s("mdi-text-box-plus-outline")}}),t._v(" "),n("span",{domProps:{textContent:t._s("Add")}})],1):t._e(),t._v(" "),t.attachmentMode&&t.serviceWorkflowAttachment?n("v-btn",{attrs:{color:t.$colors.grey.darken2,outlined:"",small:"",width:"120"},on:{click:function(e){return e.stopPropagation(),t.removeWfAttachment.apply(null,arguments)}}},[n("v-icon",{attrs:{left:""},domProps:{textContent:t._s("mdi-text-box-minus-outline")}}),t._v(" "),n("span",{domProps:{textContent:t._s("Remove")}})],1):t._e()],1),t._v(" "),"fetch"===t.attachmentMode?n("div",{staticClass:"d-flex flex-column"},t._l(t.wfAttachment[t.attachmentMode].names.length,(function(e){return n("div",{key:e,staticClass:"d-flex ml-8"},[n("v-text-field",{staticClass:"my-0 mr-auto",style:{maxWidth:"47%",minWidth:"47%"},attrs:{disabled:!t.serviceWorkflowAttachment,"persistent-hint":!t.wfAttachment[t.attachmentMode].urls[e-1],rules:t.wfAttachmentRules[t.attachmentMode].urls[e-1],clearable:"",hint:"Network reachable location of the workflow attachment",label:"URL",placeholder:"Type a URL"},on:{input:function(n){return t.updateWfAttachmentUrl(n,e-1)}},model:{value:t.wfAttachment[t.attachmentMode].urls[e-1],callback:function(n){t.$set(t.wfAttachment[t.attachmentMode].urls,e-1,n)},expression:"wfAttachment[attachmentMode].urls[ind - 1]"}}),t._v(" "),n("v-text-field",{staticClass:"my-0",style:{maxWidth:"47%",minWidth:"47%"},attrs:{disabled:!t.serviceWorkflowAttachment,"persistent-hint":!t.wfAttachment[t.attachmentMode].names[e-1],rules:t.wfAttachmentRules[t.attachmentMode].names[e-1],clearable:"",hint:"The name of the workflow attachment when it is placed in the execution directory",label:"File Name",placeholder:"Type a file name"},on:{input:function(n){return t.updateWfAttachmentName(n,e-1)}},model:{value:t.wfAttachment[t.attachmentMode].names[e-1],callback:function(n){t.$set(t.wfAttachment[t.attachmentMode].names,e-1,n)},expression:"wfAttachment[attachmentMode].names[ind - 1]"}})],1)})),0):t._e(),t._v(" "),"upload"===t.attachmentMode?n("div",{staticClass:"d-flex flex-column"},t._l(t.wfAttachment[t.attachmentMode].names.length,(function(e){return n("div",{key:e,staticClass:"d-flex ml-8"},[n("v-file-input",{staticClass:"my-0 mr-auto",style:{maxWidth:"47%",minWidth:"47%"},attrs:{disabled:!t.serviceWorkflowAttachment,"persistent-hint":!t.wfAttachment[t.attachmentMode].files[e-1],"prepend-icon":null,rules:t.wfAttachmentRules[t.attachmentMode].files[e-1],clearable:"",hint:"The file to be attached",label:"File",placeholder:"Select a file","prepend-inner-icon":"mdi-paperclip","show-size":""},on:{change:function(n){return t.updateWfAttachmentFile(n,e-1)}},model:{value:t.wfAttachment[t.attachmentMode].files[e-1],callback:function(n){t.$set(t.wfAttachment[t.attachmentMode].files,e-1,n)},expression:"wfAttachment[attachmentMode].files[ind - 1]"}}),t._v(" "),n("v-text-field",{staticClass:"my-0",style:{maxWidth:"47%",minWidth:"47%"},attrs:{disabled:!t.serviceWorkflowAttachment,"persistent-hint":!t.wfAttachment[t.attachmentMode].names[e-1],rules:t.wfAttachmentRules[t.attachmentMode].names[e-1],clearable:"",hint:"The name of the workflow attachment when it is placed in the execution directory",label:"File Name",placeholder:"Type a file name"},on:{input:function(n){return t.updateWfAttachmentName(n,e-1)}},model:{value:t.wfAttachment[t.attachmentMode].names[e-1],callback:function(n){t.$set(t.wfAttachment[t.attachmentMode].names,e-1,n)},expression:"wfAttachment[attachmentMode].names[ind - 1]"}})],1)})),0):t._e(),t._v(" "),n("div",{staticClass:"d-flex align-center mt-4"},[n("span",{style:{color:""+t.$colors.grey.darken2},domProps:{textContent:t._s("Workflow Parameters")}}),t._v(" "),n("v-tooltip",{attrs:{top:"","max-width":"400"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-icon",t._g({attrs:{right:"",small:""},domProps:{textContent:t._s("mdi-help-circle-outline")}},r))]}}])},[t._v(" "),n("span",{domProps:{textContent:t._s("[Optional] A JSON object for workflow parameters, which will be placed in the execution directory with the filename `workflow_params.json`. If you want to use a parameter file in a format other than JSON/YAML, use the Workflow Attachment field.")}})]),t._v(" "),t.inputsParsable?n("v-chip-group",{staticClass:"ml-6",attrs:{color:"primary"},model:{value:t.wfParamsMode,callback:function(e){t.wfParamsMode=e},expression:"wfParamsMode"}},[n("v-chip",{staticClass:"my-0 py-0",attrs:{value:"form",label:"",outlined:"",disabled:!t.wfParamsInputs.length}},[n("v-icon",{attrs:{left:""},domProps:{textContent:t._s("mdi-form-select")}}),t._v(" "),n("span",{domProps:{textContent:t._s("Form")}})],1),t._v(" "),n("v-chip",{staticClass:"my-0 py-0",attrs:{value:"text",label:"",outlined:""}},[n("v-icon",{attrs:{left:""},domProps:{textContent:t._s("mdi-format-text")}}),t._v(" "),n("span",{domProps:{textContent:t._s("Text")}})],1)],1):t._e()],1),t._v(" "),t.showWfParamsForm?n("div",{staticClass:"mx-6"},[n("wf-params-form",{ref:"wfParamsForm",attrs:{inputs:t.wfParamsInputs}})],1):t._e(),t._v(" "),t.showWfParamsText?n("div",{staticClass:"d-flex flex-column ml-8 mt-4"},[n("codemirror",{staticClass:"elevation-2 input-field-middle",style:{outline:"solid 1px "+(t.wfParamsError?t.$vuetify.theme.themes.light.error:t.$colors.grey.lighten1)},attrs:{options:{lineNumbers:!0,mode:t.codeMirrorMode(t.wfParams),tabSize:2}},model:{value:t.wfParams,callback:function(e){t.wfParams=e},expression:"wfParams"}}),t._v(" "),n("div",{staticClass:"mt-2 v-messages theme--light",class:{"error--text":!!t.wfParamsError},domProps:{textContent:t._s(t.wfParamsError?t.wfParamsError:"Drag-and-Drop or Copy-and-Paste parameters in JSON/YAML format into this box")}})],1):t._e(),t._v(" "),n("div",{staticClass:"d-flex align-center mt-4"},[n("span",{style:{color:""+t.$colors.grey.darken2},domProps:{textContent:t._s("Workflow Engine Parameters")}}),t._v(" "),n("v-tooltip",{attrs:{top:"","max-width":"400"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-icon",t._g({attrs:{right:"",small:""},domProps:{textContent:t._s("mdi-help-circle-outline")}},r))]}}])},[t._v(" "),n("span",{domProps:{textContent:t._s("[Optional] A JSON object to pass additional arguments to the workflow engine, where key and value will be joined.")}})]),t._v(" "),n("v-icon",{attrs:{right:""},domProps:{textContent:t._s(t.wfEngineParamsExpand?"mdi-arrow-collapse-vertical":"mdi-arrow-expand-vertical")},on:{click:function(e){t.wfEngineParamsExpand=!t.wfEngineParamsExpand}}})],1),t._v(" "),t.wfEngineParamsExpand?n("div",{staticClass:"d-flex flex-column ml-8 mt-4"},[n("codemirror",{staticClass:"elevation-2 input-field-small",style:{outline:"solid 1px "+(t.wfEngineParamsError?t.$vuetify.theme.themes.light.error:t.$colors.grey.lighten1)},attrs:{options:{lineNumbers:!0,mode:t.codeMirrorMode(t.wfEngineParams),tabSize:2}},model:{value:t.wfEngineParams,callback:function(e){t.wfEngineParams=e},expression:"wfEngineParams"}}),t._v(" "),n("div",{staticClass:"mt-2 v-messages theme--light",class:{"error--text":!!t.wfParamsError},domProps:{textContent:t._s(t.wfParamsError?t.wfParamsError:"Drag-and-Drop or Copy-and-Paste parameters in JSON/YAML format into this box")}})],1):t._e(),t._v(" "),n("div",{staticClass:"d-flex align-center mt-4"},[n("span",{style:{color:""+t.$colors.grey.darken2},domProps:{textContent:t._s("Tags")}}),t._v(" "),n("v-tooltip",{attrs:{top:"","max-width":"400"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-icon",t._g({attrs:{right:"",small:""},domProps:{textContent:t._s("mdi-help-circle-outline")}},r))]}}])},[t._v(" "),n("span",{domProps:{textContent:t._s("[Optional] A JSON object for adding metadata and changing the behavior of the WES itself.")}})]),t._v(" "),n("v-icon",{attrs:{right:""},domProps:{textContent:t._s(t.tagsExpand?"mdi-arrow-collapse-vertical":"mdi-arrow-expand-vertical")},on:{click:function(e){t.tagsExpand=!t.tagsExpand}}})],1),t._v(" "),t.tagsExpand?n("div",{staticClass:"d-flex flex-column ml-8 mt-4"},[n("codemirror",{staticClass:"elevation-2 input-field-small",style:{outline:"solid 1px "+(t.tagsError?t.$vuetify.theme.themes.light.error:t.$colors.grey.lighten1)},attrs:{options:{lineNumbers:!0,mode:t.codeMirrorMode(t.tags),tabSize:2}},model:{value:t.tags,callback:function(e){t.tags=e},expression:"tags"}}),t._v(" "),n("div",{staticClass:"mt-2 v-messages theme--light",class:{"error--text":!!t.tagsError},domProps:{textContent:t._s(t.tagsError?t.tagsError:"Drag-and-Drop or Copy-and-Paste parameters in JSON/YAML format into this box")}})],1):t._e()],1),t._v(" "),n("div",{staticClass:"d-flex justify-end pb-6 mx-12 mt-4"},[n("v-btn",{attrs:{color:"primary",outlined:"",width:"140",disabled:!t.formValid||"Available"!==t.service.state||!t.executeButton},on:{click:function(e){return e.stopPropagation(),t.executeRun.apply(null,arguments)}}},[n("v-icon",{attrs:{left:""},domProps:{textContent:t._s("mdi-rocket-launch-outline")}}),t._v(" "),n("span",{domProps:{textContent:t._s("Execute")}})],1)],1)])}),[],!1,null,"45c6b25c",null),U=Y.exports;C()(Y,{VBtn:P.a,VCard:F.a,VChip:N.a,VChipGroup:T.a,VFileInput:R.a,VIcon:M.a,VSelect:V.a,VSpacer:D.a,VTextField:O.a,VTooltip:L.a});n(76);var z=n(426),J={components:{codemirror:d.codemirror,WorkflowIcon:z.a},props:{workflowId:{type:String,required:!0}},data:function(){return{workflowInfoHeaders:[{text:"Key",value:"key"},{text:"Value",value:"value"}],copyTooltip:!1,copied:!1}},computed:{workflow:function(){return this.$store.getters["workflows/workflow"](this.workflowId)},service:function(){return this.$store.getters["services/service"](this.workflow.serviceId)},workflowInfoContents:function(){return[{key:"URL",value:this.workflow.url},{key:this.workflow.preRegistered?"Updated Date":"Added Date",value:this.workflow.preRegistered?this.$dayjs(this.workflow.updatedDate).local().format("YYYY-MM-DD HH:mm:ss"):this.$dayjs(this.workflow.addedDate).local().format("YYYY-MM-DD HH:mm:ss")}]}},methods:{validUrl:function(t){return Object(m.g)(t)},codeMirrorMode:function(content){return Object(m.a)(content)},copyWorkflowContent:function(){var t=this;this.copyTooltip=!1,this.$copyText(this.workflow.content),setTimeout((function(){t.copyTooltip=!0,t.copied=!0,setTimeout((function(){t.copyTooltip=!1,setTimeout((function(){t.copied=!1}),300)}),1e3)}),300)},downloadWorkflowContent:function(){var t=new Blob([this.workflow.content],{type:"text/plane"}),e=window.URL.createObjectURL(t),link=document.createElement("a");link.download=this.workflow.url.split("/").slice(-1)[0],link.href=e,link.click(),link.remove(),window.URL.revokeObjectURL(e)}}},B=o.a.extend(J),H=(n(586),n(603)),K=Object(_.a)(B,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{attrs:{"max-width":"1200"}},[n("div",{staticClass:"d-flex align-center mx-6 pt-4"},[n("workflow-icon",{attrs:{size:36,"top-margin":!1,"wf-type":t.workflow.type}}),t._v(" "),n("div",{staticClass:"card-header",domProps:{textContent:t._s(t.workflow.name)}}),t._v(" "),t.workflow.preRegistered?n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-icon",t._g({staticClass:"ml-2 mt-1",attrs:{color:t.$colors.indigo.darken1},domProps:{textContent:t._s("mdi-account-check-outline")}},r))]}}],null,!1,3490612083)},[t._v(" "),n("span",{domProps:{textContent:t._s("Pre-registered workflow")}})]):t._e()],1),t._v(" "),n("v-data-table",{staticClass:"mx-12 mt-2 info-table",attrs:{headers:t.workflowInfoHeaders,items:t.workflowInfoContents,"calculate-widths":"","disable-filtering":"","disable-pagination":"","disable-sort":"","hide-default-footer":"","hide-default-header":"","item-key":"key"},scopedSlots:t._u([{key:"item.value",fn:function(e){var r=e.item;return["URL"===r.key&&t.validUrl(r.value)?n("a",{attrs:{href:r.value},domProps:{textContent:t._s(r.value)}}):n("span",{domProps:{textContent:t._s(r.value)}})]}}],null,!0)}),t._v(" "),n("div",{staticClass:"d-flex ml-12 mr-3 mt-2 pb-6"},[n("codemirror",{staticClass:"elevation-2 content-viewer flex-grow-1",style:{outline:"solid 1px "+t.$colors.grey.lighten1,maxWidth:"97%"},attrs:{options:{lineNumbers:!0,mode:t.codeMirrorMode(t.workflow.content),tabSize:2,readOnly:"nocursor"},value:t.workflow.content}}),t._v(" "),n("div",{staticClass:"d-flex flex-column ml-3"},[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-icon",t._g({attrs:{color:t.$colors.grey.darken1},domProps:{textContent:t._s("mdi-download")},on:{click:function(e){return e.stopPropagation(),t.downloadWorkflowContent.apply(null,arguments)}}},r))]}}])},[t._v(" "),n("span",{domProps:{textContent:t._s("Download the workflow document")}})]),t._v(" "),n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("div",t._g({staticClass:"mt-2"},r),[n("v-icon",{attrs:{color:t.$colors.grey.darken1},domProps:{textContent:t._s("mdi-clipboard-outline")},on:{click:function(e){return e.stopPropagation(),t.copyWorkflowContent.apply(null,arguments)}}})],1)]}}]),model:{value:t.copyTooltip,callback:function(e){t.copyTooltip=e},expression:"copyTooltip"}},[t._v(" "),n("span",{domProps:{textContent:t._s(t.copied?"Copied!!":"Copy the workflow document")}})])],1)],1)],1)}),[],!1,null,"39ba9337",null),G=K.exports;C()(K,{VCard:F.a,VDataTable:H.a,VIcon:M.a,VTooltip:L.a});var Q={components:{AppBar:l.a,AppFooter:c.a,Breadcrumbs:f.a,ExecuteCard:U,InfoCard:G},middleware:function(t){var e=t.store,n=t.route.query.workflowId||"";Array.isArray(n)&&(n=n[0]||""),window.onNuxtReady(Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch("services/updateService",e.getters["workflows/workflow"](n).serviceId);case 2:case"end":return t.stop()}}),t)}))))},computed:{service:function(){return this.$store.getters["services/service"](this.workflow.serviceId)},workflow:function(){return this.$store.getters["workflows/workflow"](this.workflowId)},workflowId:function(){var t=this.$route.query.workflowId||"";return Array.isArray(t)?t[0]||"":t},existWorkflowId:function(){return this.$store.getters["workflows/workflowIds"].includes(this.workflowId)}}},X=o.a.extend(Q),Z=n(606),tt=n(406),et=n(410),nt=n(408),ot=Object(_.a)(X,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("app-bar"),t._v(" "),n("v-main",{staticClass:"background"},[n("v-container",{attrs:{fluid:""}},[n("breadcrumbs"),t._v(" "),t.existWorkflowId?[n("info-card",{staticClass:"mx-auto",attrs:{"workflow-id":t.workflowId}}),t._v(" "),n("v-alert",{staticClass:"mx-auto mt-8",attrs:{"max-width":"1200",type:"error",value:"Available"!==t.service.state}},[t._v(t._s("Workflow cannot be executed because the status of service "+t.service.name+" is not available.")+"\n        ")]),t._v(" "),n("execute-card",{staticClass:"mx-auto mt-8 mb-4",attrs:{"workflow-id":t.workflowId}})]:[t._v(t._s("Workflow id: "+t.workflowId+" does not exist."))]],2)],1),t._v(" "),n("app-footer")],1)}),[],!1,null,null,null);e.default=ot.exports;C()(ot,{VAlert:Z.a,VApp:tt.a,VContainer:et.a,VMain:nt.a})}}]);