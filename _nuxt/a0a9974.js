(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{413:function(t,e,r){"use strict";var n=r(0).a.extend({data:function(){return{version:"1.0.13"}}}),o=r(77),l=r(125),c=r.n(l),d=r(483),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-footer",{attrs:{color:t.$colors.indigo.darken1,absolute:"",app:"",height:"24",padless:""}},[r("div",{staticClass:"mx-auto my-auto"},[r("span",{staticClass:"white--text",style:{fontSize:"12px"}},[t._v("\n      sapporo-web "+t._s(t.version)+" Â© Bioinformation and DDBJ Center\n    ")])])])}),[],!1,null,null,null);e.a=component.exports;c()(component,{VFooter:d.a})},420:function(t,e,r){t.exports=r.p+"img/cwl-icon.d6a463e.png"},421:function(t,e,r){t.exports=r.p+"img/wdl-icon.3954ce4.png"},422:function(t,e,r){t.exports=r.p+"img/nextflow-icon.5351591.png"},423:function(t,e,r){t.exports=r.p+"img/snakemake-icon.b8289bc.png"},428:function(t,e,r){"use strict";r(29),r(15),r(63),r(76),r(40);var n={data:function(){return{type:"",id:""}},computed:{items:function(){var t=[{text:"Home",nuxt:!0,to:"/",icon:"mdi-home-outline"}];if("service"===this.type){var e=this.$store.getters["services/service"](this.id);e&&t.push({text:e.name,nuxt:!0,to:"/services?serviceId=".concat(e.id),icon:"mdi-dns-outline"})}else if("workflow"===this.type){var r=this.$store.getters["workflows/workflow"](this.id);if(r){var n=this.$store.getters["services/service"](r.serviceId);n&&t.push({text:n.name,nuxt:!0,to:"/services?serviceId=".concat(n.id),icon:"mdi-dns-outline"}),t.push({text:r.name,nuxt:!0,to:"/workflows?workflowId=".concat(r.id),icon:"mdi-graph-outline"})}}else if("run"===this.type){var o=this.$store.getters["runs/run"](this.id);if(o){var l=this.$store.getters["workflows/workflow"](o.workflowId);if(l){var c=this.$store.getters["services/service"](o.serviceId);c&&t.push({text:c.name,nuxt:!0,to:"/services?serviceId=".concat(c.id),icon:"mdi-dns-outline"}),t.push({text:l.name,nuxt:!0,to:"/workflows?workflowId=".concat(l.id),icon:"mdi-graph-outline"})}t.push({text:o.name,nuxt:!0,to:"/runs?runId=".concat(o.id),icon:"mdi-chart-box-outline"})}}return t}},created:function(){for(var t=this.$route.query,e=0,r=Object.keys(t);e<r.length;e++){var n=r[e];if(n.includes("Id")){this.type=n.slice(0,-2);var o=t[n]||"";Array.isArray(o)&&(o=o[0]||""),this.id=o;break}}}},o=r(0).a.extend(n),l=r(77),c=r(125),d=r.n(c),m=r(599),v=r(486),f=r(399),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-breadcrumbs",{staticClass:"pt-2",attrs:{items:t.items,large:""},scopedSlots:t._u([{key:"divider",fn:function(){return[r("v-icon",{domProps:{textContent:t._s("mdi-chevron-right")}})]},proxy:!0},{key:"item",fn:function(e){var n=e.item;return[r("v-breadcrumbs-item",{attrs:{nuxt:n.nuxt,to:n.to}},[r("v-icon",{attrs:{color:t.$colors.grey.darken2,left:""},domProps:{textContent:t._s(n.icon)}}),t._v(" "),r("span",{domProps:{textContent:t._s(n.text)}})],1)]}}])})}),[],!1,null,null,null);e.a=component.exports;d()(component,{VBreadcrumbs:m.a,VBreadcrumbsItem:v.a,VIcon:f.a})},460:function(t,e,r){var content=r(489);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(33).default)("65c2d3f6",content,!0,{sourceMap:!1})},471:function(t,e,r){var content=r(559);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(33).default)("2db43625",content,!0,{sourceMap:!1})},488:function(t,e,r){"use strict";r(460)},489:function(t,e,r){var n=r(32)(!1);n.push([t.i,'.content-viewer[data-v-07ee1e20] .CodeMirror{height:300px!important;font-size:.9rem!important}.content-viewer[data-v-07ee1e20] .CodeMirror-lines{font-family:"Fira Code",monospace,sans-serif!important}.info-table[data-v-07ee1e20] td:first-child{width:220px;font-weight:500}.info-table[data-v-07ee1e20] tr:not(:last-child) td{border-bottom:none!important}',""]),t.exports=n},556:function(t,e,r){r(3)({target:"Number",stat:!0},{isInteger:r(557)})},557:function(t,e,r){var n=r(21),o=Math.floor;t.exports=function(t){return!n(t)&&isFinite(t)&&o(t)===t}},558:function(t,e,r){"use strict";r(471)},559:function(t,e,r){var n=r(32)(!1);n.push([t.i,'.content-viewer[data-v-36e526dd] .CodeMirror{height:300px!important;font-size:.9rem!important}.content-viewer[data-v-36e526dd] .CodeMirror-lines{font-family:"Fira Code",monospace,sans-serif!important}.info-table[data-v-36e526dd] td:first-child{width:220px;font-weight:500}.info-table[data-v-36e526dd] tr:not(:last-child) td{border-bottom:none!important}',""]),t.exports=n},594:function(t,e,r){"use strict";r.r(e);var n=r(5),o=(r(63),r(76),r(78),r(55),r(0)),l=r(199),c=r(413),d=r(428),m=(r(20),r(280),r(424),r(425),r(426),r(427)),v=r(71),f={components:{codemirror:m.codemirror},props:{runId:{type:String,required:!0}},data:function(){return{runInfoHeaders:[{text:"Key",value:"key"},{text:"Value",value:"value"}],tab:2,tooltip:!1,cancelButton:!0}},computed:{service:function(){return this.$store.getters["services/service"](this.run.serviceId)},workflow:function(){return this.$store.getters["workflows/workflow"](this.run.workflowId)},run:function(){return this.$store.getters["runs/run"](this.runId)},runInfoContents:function(){var t=[{key:"Run ID",value:this.runId},{key:"Workflow URL",value:this.run.runLog.request.workflow_url}];return this.service.serviceInfo.supported_wes_versions.includes("sapporo-wes-1.0.0")&&t.push({key:"Workflow Engine",value:"".concat(this.run.runLog.request.workflow_engine_name," ").concat(this.$store.getters["services/workflowEngineVersion"]({serviceId:this.service.id,workflowEngine:this.run.runLog.request.workflow_engine_name}))}),t},tabItems:function(){var t,e=[{key:"Workflow Engine Parameters",value:"string"==typeof this.run.runLog.request.workflow_engine_parameters?this.run.runLog.request.workflow_engine_parameters:JSON.stringify(this.run.runLog.request.workflow_engine_parameters,null,2)},{key:"Tags",value:"string"==typeof this.run.runLog.request.tags?this.run.runLog.request.tags:JSON.stringify(this.run.runLog.request.tags,null,2)},{key:"Workflow Prameters",value:"string"==typeof this.run.runLog.request.workflow_params?this.run.runLog.request.workflow_params:JSON.stringify(this.run.runLog.request.workflow_params,null,2)}];return this.service.serviceInfo.supported_wes_versions.includes("sapporo-wes-1.0.0")&&(this.tab=3,e.splice(2,0,{key:"Workflow Attachment",value:JSON.stringify((null===(t=this.run.runLog.request)||void 0===t?void 0:t.workflow_attachment)||null,null,2)})),e}},methods:{reloadRunState:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("runs/updateRun",t.runId);case 2:case"end":return e.stop()}}),e)})))()},codeMirrorMode:function(content){return Object(v.a)(content)},validUrl:function(t){return Object(v.e)(t)},cancelRun:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!["QUEUED","INITIALIZING","RUNNING","PAUSED"].includes(t.run.state)){e.next=7;break}return t.cancelButton=!1,e.next=4,t.$store.dispatch("runs/cancelRun",t.runId);case 4:return e.next=6,t.$store.dispatch("runs/updateRun",t.runId);case 6:t.cancelButton=!0;case 7:case"end":return e.stop()}}),e)})))()},copyTooltip:function(){var t=this;this.$copyText(this.runId),this.tooltip=!0,setTimeout((function(){t.tooltip=!1}),1500)}}},h=o.a.extend(f),w=(r(488),r(77)),_=r(125),k=r.n(_),x=r(400),y=r(407),I=r(461),C=r(595),L=r(399),R=r(405),$=r(589),N=r(600),S=r(597),O=r(590),component=Object(w.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{attrs:{"max-width":"1200"}},[n("div",{staticClass:"d-flex align-center mx-6 pt-4"},[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return["cwl"===t.workflow.type.toLowerCase()?n("img",t._g({staticClass:"mr-2",attrs:{src:r(420),height:"36"}},o)):"wdl"===t.workflow.type.toLowerCase()?n("img",t._g({staticClass:"mr-2",attrs:{src:r(421),height:"36"}},o)):"nextflow"===t.workflow.type.toLowerCase()?n("img",t._g({staticClass:"mr-4",attrs:{src:r(422),height:"36"}},o)):"snakemake"===t.workflow.type.toLowerCase()?n("img",t._g({staticClass:"mr-4",attrs:{src:r(423),height:"36"}},o)):n("v-icon",t._g({attrs:{left:"",color:"black"},domProps:{textContent:t._s("mdi-graph-outline")}},o))]}}])},[t._v(" "),n("span",{domProps:{textContent:t._s(t.workflow.type+" "+t.workflow.version)}})]),t._v(" "),n("div",{staticClass:"card-header",domProps:{textContent:t._s(t.run.name)}}),t._v(" "),n("v-spacer"),t._v(" "),n("v-chip",{staticClass:"mr-4",attrs:{color:t.$store.getters["runs/stateColor"](t.run.id),"text-color":"white"},domProps:{textContent:t._s(t.run.state)}}),t._v(" "),["QUEUED","INITIALIZING","RUNNING","PAUSED"].includes(t.run.state)?n("v-btn",{staticClass:"mr-4",attrs:{outlined:"",color:"error",disabled:!t.cancelButton},on:{click:function(e){return e.stopPropagation(),t.cancelRun.apply(null,arguments)}}},[n("v-icon",{attrs:{left:""},domProps:{textContent:t._s("mdi-close")}}),t._v(" "),n("span",{domProps:{textContent:t._s("Cancel Run")}})],1):t._e(),t._v(" "),n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-btn",t._g({attrs:{color:t.$colors.grey.darken2,outlined:"",small:""},on:{click:function(e){return e.stopPropagation(),t.reloadRunState.apply(null,arguments)}}},r),[n("v-icon",{domProps:{textContent:t._s("mdi-reload")}})],1)]}}])},[t._v(" "),n("span",{domProps:{textContent:t._s("Reload run status")}})])],1),t._v(" "),n("v-data-table",{staticClass:"mx-12 mt-2 info-table",attrs:{headers:t.runInfoHeaders,items:t.runInfoContents,"calculate-widths":"","disable-filtering":"","disable-pagination":"","disable-sort":"","hide-default-footer":"","hide-default-header":"","item-key":"key"},scopedSlots:t._u([{key:"item.value",fn:function(e){var r=e.item;return["Run ID"===r.key?n("div",{staticClass:"d-flex align-center"},[n("span",{domProps:{textContent:t._s(r.value)}}),t._v(" "),n("v-tooltip",{attrs:{top:"",value:t.tooltip},scopedSlots:t._u([{key:"activator",fn:function(e){return[n("v-icon",t._g({attrs:{right:""},domProps:{textContent:t._s("mdi-clipboard-outline")},on:{click:function(e){return e.stopPropagation(),t.copyTooltip.apply(null,arguments)}}},e))]}}],null,!0)},[t._v(" "),n("span",{domProps:{textContent:t._s("Copied!!")}})])],1):"Workflow URL"===r.key&&t.validUrl(r.value)?n("a",{attrs:{href:r.value},domProps:{textContent:t._s(r.value)}}):n("span",{domProps:{textContent:t._s(r.value)}})]}}],null,!0)}),t._v(" "),n("div",{staticClass:"ml-12 mr-11"},[n("v-tabs",{attrs:{vertical:"",height:"332"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[t._l(t.tabItems,(function(e){return n("v-tab",{key:e.key,style:{textTransform:"none",justifyContent:"start",letterSpacing:"normal",maxWidth:"210px",minWidth:"210px"},domProps:{textContent:t._s(e.key)}})})),t._v(" "),t._l(t.tabItems,(function(e){return n("v-tab-item",{key:e.key},[n("codemirror",{staticClass:"ml-6 mr-1 mt-2 mb-6 elevation-2 content-viewer",style:{outline:"solid 1px "+t.$colors.grey.lighten1},attrs:{options:{lineNumbers:!0,mode:t.codeMirrorMode(e.value),readOnly:"nocursor",tabSize:2},value:e.value}})],1)}))],2)],1)],1)}),[],!1,null,"07ee1e20",null),V=component.exports;k()(component,{VBtn:x.a,VCard:y.a,VChip:I.a,VDataTable:C.a,VIcon:L.a,VSpacer:R.a,VTab:$.a,VTabItem:N.a,VTabs:S.a,VTooltip:O.a});r(556),r(44),r(40),r(24),r(58),r(11),r(35),r(41),r(155),r(29);var P={components:{codemirror:m.codemirror},props:{runId:{type:String,required:!0}},data:function(){return{logInfoHeaders:[{text:"Key",value:"key"},{text:"Value",value:"value"}],tab:null}},computed:{service:function(){return this.$store.getters["services/service"](this.run.serviceId)},run:function(){return this.$store.getters["runs/run"](this.runId)},logInfoContents:function(){if(this.service.serviceInfo.supported_wes_versions.includes("sapporo-wes-1.0.0")){var t=this.run.runLog.run_log;return[{key:"Start Time",value:t.start_time?this.$dayjs(t.start_time).local().format("YYYY-MM-DD HH:mm:ss"):""},{key:"End Time",value:t.end_time?this.$dayjs(t.end_time).local().format("YYYY-MM-DD HH:mm:ss"):""},{key:"Exit Code",value:"".concat(Number.isInteger(t.exit_code)?t.exit_code:"")}]}var e=this.run.runLog.run_log;return[{key:"Start Time",value:(null==e?void 0:e.task_started)?this.$dayjs(e.task_started).add((null==e?void 0:e.utc_offset)||0,"h").local().format("YYYY-MM-DD HH:mm:ss"):""},{key:"End Time",value:(null==e?void 0:e.task_finished)?this.$dayjs(e.task_finished).add((null==e?void 0:e.utc_offset)||0,"h").local().format("YYYY-MM-DD HH:mm:ss"):""}]},tabItems:function(){if(this.service.serviceInfo.supported_wes_versions.includes("sapporo-wes-1.0.0")){var t=this.run.runLog.run_log;return[{key:"Command",value:t.cmd},{key:"Stdout",value:t.stdout},{key:"Stderr",value:t.stderr},{key:"Outputs",value:JSON.stringify(this.run.runLog.outputs||{},null,2)}]}var e=this.run.runLog.run_log;return[{key:"Command",value:(null==e?void 0:e.command)||""},{key:"Stdout",value:(null==e?void 0:e.stdout)||""},{key:"Stderr",value:(null==e?void 0:e.stderr)||""},{key:"Task Logs",value:JSON.stringify(this.run.runLog.task_logs,null,2)},{key:"Outputs",value:JSON.stringify(this.run.runLog.outputs,null,2)}]}},methods:{codeMirrorMode:function(content){return Object(v.a)(content)},downloadOutputFile:function(t){var link=document.createElement("a");link.download=t.file_name.split("/").slice(-1)[0],link.href=t.file_url,link.click(),link.remove()},downloadRunLog:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,link;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("runs/updateRun",t.run.id);case 2:r=new Blob([JSON.stringify(t.run.runLog,null,2)],{type:"application/json"}),n=window.URL.createObjectURL(r),(link=document.createElement("a")).download="".concat(t.run.name,".json"),link.href=n,link.click(),link.remove(),window.URL.revokeObjectURL(n);case 10:case"end":return e.stop()}}),e)})))()}}},M=o.a.extend(P),T=(r(558),r(468)),j=r(442),E=r(429),D=r(469),U=r(445),Y=Object(w.a)(M,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",{attrs:{"max-width":"1200"}},[r("div",{staticClass:"d-flex align-center mx-6 pt-4"},[r("v-icon",{attrs:{color:"black",left:""},domProps:{textContent:t._s("mdi-file-chart-outline")}}),t._v(" "),r("div",{staticClass:"card-header",domProps:{textContent:t._s("Run Log")}}),t._v(" "),r("v-spacer"),t._v(" "),r("v-btn",{staticClass:"mr-6",attrs:{color:t.$colors.grey.darken2,outlined:""},on:{click:function(e){return e.stopPropagation(),t.downloadRunLog.apply(null,arguments)}}},[r("v-icon",{attrs:{left:""},domProps:{textContent:t._s("mdi-download")}}),t._v(" "),r("span",{domProps:{textContent:t._s("Download Run Log")}})],1)],1),t._v(" "),r("v-data-table",{staticClass:"mx-12 mt-2 info-table",attrs:{headers:t.logInfoHeaders,items:t.logInfoContents,"calculate-widths":"","disable-filtering":"","disable-pagination":"","disable-sort":"","hide-default-footer":"","hide-default-header":"","item-key":"key"}}),t._v(" "),r("div",{staticClass:"ml-12 mr-11"},[r("v-tabs",{attrs:{vertical:"",height:"332"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[t._l(t.tabItems,(function(e){return r("v-tab",{key:e.key,style:{textTransform:"none",justifyContent:"start",letterSpacing:"normal",maxWidth:"210px",minWidth:"210px"},domProps:{textContent:t._s(e.key)}})})),t._v(" "),t._l(t.tabItems,(function(e){return r("v-tab-item",{key:e.key},[t.service.serviceInfo.supported_wes_versions.includes("sapporo-wes-1.0.0")&&"Outputs"===e.key&&null!==JSON.parse(e.value)&&0!==JSON.parse(e.value).length?r("v-list",{staticClass:"ml-6 mt-2 mb-6 mr-1",style:{outline:"solid 1px "+t.$colors.grey.lighten1,overflowY:"auto"},attrs:{dense:"",elevation:"2",flat:"","max-height":"300",rounded:""}},[r("v-list-item-group",{attrs:{color:"primary",disable:""}},t._l(JSON.parse(e.value),(function(e,n){return r("v-list-item",{key:n,on:{click:function(r){return t.downloadOutputFile(e)}}},[r("v-list-item-icon",[r("v-icon",{domProps:{textContent:t._s("mdi-download")}})],1),t._v(" "),r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:t._s(e.file_name)}})],1)],1)})),1)],1):r("codemirror",{staticClass:"ml-6 mr-1 mt-2 mb-6 elevation-2 content-viewer",style:{outline:"solid 1px "+t.$colors.grey.lighten1},attrs:{options:{lineNumbers:!0,mode:t.codeMirrorMode(e.value),readOnly:"nocursor",lineWrapping:"Command"===e.key,tabSize:2},value:e.value}})],1)}))],2)],1)],1)}),[],!1,null,"36e526dd",null),A=Y.exports;k()(Y,{VBtn:x.a,VCard:y.a,VDataTable:C.a,VIcon:L.a,VList:T.a,VListItem:j.a,VListItemContent:E.a,VListItemGroup:D.a,VListItemIcon:U.a,VListItemTitle:E.b,VSpacer:R.a,VTab:$.a,VTabItem:N.a,VTabs:S.a});var J={components:{AppBar:l.a,AppFooter:c.a,Breadcrumbs:d.a,InfoCard:V,LogCard:A},middleware:function(t){var e=t.store,r=t.route.query.runId||"";Array.isArray(r)&&(r=r[0]||""),window.onNuxtReady(Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch("runs/updateRun",r);case 2:case"end":return t.stop()}}),t)}))))},computed:{runId:function(){var t=this.$route.query.runId||"";return Array.isArray(t)?t[0]||"":t},existRunId:function(){return this.$store.getters["runs/runIds"].includes(this.runId)},run:function(){return this.$store.getters["runs/run"](this.runId)}},created:function(){var t=this;setInterval(Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("visible"!==document.visibilityState){e.next=4;break}if(!["UNKNOWN","QUEUED","INITIALIZING","RUNNING","CANCELING"].includes(t.$store.getters["runs/run"](t.runId))){e.next=4;break}return e.next=4,t.$store.dispatch("runs/updateRun",t.runId);case 4:case"end":return e.stop()}}),e)}))),5e3)}},B=o.a.extend(J),H=r(406),W=r(410),G=r(408),F=Object(w.a)(B,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",[r("app-bar"),t._v(" "),r("v-main",{staticClass:"background"},[r("v-container",{attrs:{fluid:""}},[r("breadcrumbs"),t._v(" "),t.existRunId?[r("info-card",{staticClass:"mx-auto",attrs:{"run-id":t.runId}}),t._v(" "),r("log-card",{staticClass:"mt-8 mx-auto mb-4",attrs:{"run-id":t.runId}})]:[t._v(t._s("Run id: "+t.runId+" does not exist."))]],2)],1),t._v(" "),r("app-footer")],1)}),[],!1,null,null,null);e.default=F.exports;k()(F,{VApp:H.a,VContainer:W.a,VMain:G.a})}}]);